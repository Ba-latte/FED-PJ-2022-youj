/* ì œì´ì¿¼ë¦¬ë¡œ êµ¬í˜„í•œ ìë™í˜ì´ì§€ íœ  JS : jquery-autoScroll-class.js */


/********************************************************
    [ ğŸ”¥í´ë˜ìŠ¤ë¡œ ë¬¶ì–´ì„œ exportí•´ì¤€ë‹¤! ]
-ë³€ê²½ì‚¬í•­ë“¤
1.ê³µìš© ë³€ìˆ˜ëŠ” constructorì— thisí‚¤ì›Œë“œë¡œ ë“±ë¡í•¨
2.ëª¨ë“  í•¨ìˆ˜ëŠ” ë©”ì„œë“œí˜•íƒœë¡œ ë³€ê²½í•¨
ex) function í•¨ìˆ˜ëª…(){} ----->>> ë©”ì„œë“œëª…(){}
3.ì„œë¡œ ë‹¤ë¥¸ ë©”ì„œë“œì—ì„œ í´ë˜ìŠ¤ ë‚´ë¶€ ë‹¤ë¥¸ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ this í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í˜¸ì¶œí•¨!
4.ì´ë²¤íŠ¸ ë“±ë¡ì‹œ addEventListener(ì´ë²¤íŠ¸ëª…, í•¨ìˆ˜)
í•¨ìˆ˜ì¼ë•ŒëŠ” í•¨ìˆ˜ëª…ë§Œ ì“°ë©´ ë“±ë¡ë˜ì—ˆìœ¼ë‚˜,
í´ë˜ìŠ¤ëŠ” í•¨ìˆ˜ê°€ ì•„ë‹Œ ë©”ì„œë“œì´ë¯€ë¡œ! ì´ê²ƒì€ ìµëª…í•¨ìˆ˜ êµ¬ì—­ì„ ë§Œë“¤ê³  í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ this í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œ ë©”ì„œë“œ í˜¸ì¶œì„ í•´ì•¼ í˜¸ì¶œë¨!

********************************************************/
class AutoScroll {
    // ìƒì„±ì ë©”ì„œë“œ(ìµœì´ˆ ì‹¤í–‰êµ¬ì—­ì´ ë˜ê¸°ë„ í•¨)
    constructor() {



        /********************************************************
            ëŒ€ìƒ ë³€ìˆ˜ í• ë‹¹í•˜ê¸°
        ********************************************************/
        // ì „ì²´ í˜ì´ì§€ ë²ˆí˜¸
        this.pno = 0;
        // í˜ì´ì§€ ìš”ì†Œ
        this.pg = $(".page");
        // ì „ì²´ í˜ì´ì§€ ê°œìˆ˜
        this.pgcnt = this.pg.length;
        // console.log("í˜ì´ì§€ ê°œìˆ˜: ", this.pgcnt, this.pg);
        // ê´‘í´(ê´‘íœ ? ê´‘ì‹¤í–‰;;)ê¸ˆì§€ë³€ìˆ˜ - ë³€ìˆ˜ë¥¼ ë°°ì—´ì— ë‹´ìœ¼ë©´! ì—¬ëŸ¬ ê¸ˆì§€ ë³€ìˆ˜ë“¤ í•œë²ˆì— ê´€ë¦¬ ê°€ëŠ¥í•¨!
        this.prot = [];
        // ê´‘ìŠ¤í¬ë¡¤ ê¸ˆì§€
        this.prot[0] = 0;
        // ê´‘í´ ì´ˆê¸°ê°’ (chgMenuì—ì„œì˜ ê´‘í´ê¸ˆì§€)
        this.prot[1] = 0;

        // THIS.GNBë©”ë‰´ li
        this.gnb = $(".gnb li");
        // ì¸ë””ì¼€ì´í„° ë©”ë‰´ li
        this.indic = $(".indic li");

        // ê° í˜ì´ì§€ë³„ ë“±ì¥ìš”ì†Œ
        this.minfo = $(".minfo");

        // ğŸ’–ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì‹œ ì ‘ê·¼í•˜ì—¬ ë³€ê²½ê°€ëŠ¥í•œ ì†ì„± 2ê°€ì§€ ì„ ì •í•¨! ///////////////////////////
        // (1)ì´ë™ì‹œê°„
        this.sc_speed = 700;

        // (2)ì´ì§•ê°’
        this.easing = "easeInOutBack";

        // â­ìµœì´ˆë¡œ í˜¸ì¶œí•  ë©”ì„œë“œë„ ì—¬ê¸°ì„œ í˜¸ì¶œ!â­
        this.initPg();

    } //////////// constructor ////////////////////




    /************************************************************
        ë©”ì„œë“œëª… : initPg
        ê¸°ëŠ¥ : í˜ì´ì§€ ì´ˆê¸° ì„¸íŒ…í•˜ê¸°
    ************************************************************/
    initPg() {
        /********************************************************
            ì´ë²¤íŠ¸ ë“±ë¡í•˜ê¸°
        ********************************************************/
        // ìœˆë„ìš° íœ  ì´ë²¤íŠ¸ ë°œìƒì‹œ
        // $(window).on("wheel", this.wheelFn);
        $(window).on("wheel", ()=>this.wheelFn());
        // THIS.GNB ë©”ë‰´ í´ë¦­ì‹œ
        // ëŒ€ìƒ : .gnb a
        $(".gnb a").click(()=>this.chgMenu());
        // ì¸ë””ì¼€ì´í„° ë©”ë‰´ í´ë¦­ì‹œ
        // ëŒ€ìƒ : .indic a
        $(".indic a").click(()=>this.chgMenu());
        // : ë©”ì„œë“œ í˜¸ì¶œí•˜ëŠ” ëª…ë ¹ë¬¸ í˜•íƒœë¡œ ì§ì ‘ í˜¸ì¶œ?í•´ì•¼ í˜¸ì¶œì´ ëœë‹¤ê³  í•˜ì‹¬(;;;)



        // ìƒˆë¡œê³ ì¹¨ì‹œ ìŠ¤í¬ë¡¤ìœ„ì¹˜ë¥¼ ê³„ì† ì¡ì•„ë‘ê³  ìˆê¸° ë•Œë¬¸ì— ì„¸íŒ…ì€ 1ë²ˆìœ¼ë¡œ ë°”ë€ŒëŠ”ë° ìœ„ì¹˜ëŠ” ê·¸ëŒ€ë¡œì„;; -> ë°”ê¿”ì•¼í•¨
        // ìƒˆë¡œê³ ì¹¨ì‹œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ìºì‹± ë³€ê²½í•˜ê¸° : ë§¨ìœ„ë¡œ!
        $("html,body").animate({ scrollTop: "0px" });


    } ////////////////// initPg ë©”ì„œë“œ ///////////////////////////////




    /*******************************************************
        ë©”ì„œë“œëª… : wheelFn
        ê¸°ëŠ¥ : ë§ˆìš°ìŠ¤íœ  ì´ë²¤íŠ¸ ë°œìƒì‹œ í˜¸ì¶œë¨
        ->í•œ í˜ì´ì§€ì”© ìë™ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥
    *******************************************************/
    wheelFn() {
        // console.log("íœ ~~~");
        // ê´‘íœ ê¸ˆì§€ - 1ì´ë©´ ë¦¬í„´ / 0ì´ë©´ 1ì„ ì£¼ê³  ì¼ì • ì‹œê°„(0.8ì´ˆ) ì§€ë‚œ í›„ 0ìœ¼ë¡œ ë‹¤ì‹œ ë§Œë“¤ê¸°
        if (this.prot[0])
            return;
        this.chkCrazy(0);


        // 1.íœ  ë°©í–¥ ì•Œì•„ë‚´ê¸°
        let delta = event.wheelDelta;
        console.log(delta);

        // 2.ë°©í–¥ì— ë”°ë¥¸ í˜ì´ì§€ë²ˆí˜¸ ì¦ê°
        if (delta < 0) {
            this.pno++;
            if (this.pno === this.pgcnt)
                this.pno = this.pgcnt - 1;
            // ë§ˆì§€ë§‰ í˜ì´ì§€ ë²ˆí˜¸ì— ê³ ì •ì‹œí‚¤ê¸°! (ë”ì´ìƒ ì¦ê°€ ëª»í•˜ë„ë¡)
        }
        else {
            this.pno--;
            if (this.pno === -1)
                this.pno = 0;
            // ì²« í˜ì´ì§€ ë²ˆí˜¸ì— ê³ ì •ì‹œí‚¤ê¸°! (ë”ì´ìƒ ê°ì†Œ ëª»í•˜ë„ë¡)
        }
        // console.log(this.pno);
        // 3.ìŠ¤í¬ë¡¤ ì´ë™í•˜ê¸° + ë©”ë‰´ì— í´ë˜ìŠ¤ "on" ë„£ê¸° (ìì‹ ì œì™¸ í˜•ì œë“¤ì—ê²ŒëŠ” onë¹¼ê¸°)
        this.movePg();


    } ////////////////////////// wheelFn ë©”ì„œë“œ /////////////////////////////////



    /******************************************
        ë©”ì„œë“œëª… : chgMenu
        ê¸°ëŠ¥ : ë©”ë‰´ í´ë¦­ì‹œ ë©”ë‰´ ë³€ê²½ê³¼ í˜ì´ì§€ ì´ë™
    ******************************************/
    chgMenu() {
        // console.log("ë‚˜ í´ë¦­!", this, event.currentTarget, idx);
        // this í‚¤ì›Œë“œëŠ” ìƒì„±ì ë©”ì„œë“œì˜ ê°ì²´ë¥¼ ê°€ë¦¬í‚´!
        // ë”°ë¼ì„œ ì´ë²¤íŠ¸ ë°œìƒ ìì‹ ì€ event.currentTarget ë¼ê³  í•´ì•¼ í•¨!
        // 0.ê´‘í´ê¸ˆì§€
        if (this.prot[1])
            return;
        this.chkCrazy(1);


        // 1.í´ë¦­ëœ aìš”ì†Œì˜ ë¶€ëª¨ liìˆœë²ˆì„ êµ¬í•¨ === this.pno
        let idx = $(this).parent().index();
        console.log(idx);
        // 2.ì „ì—­ í˜ì´ì§€ ë²ˆí˜¸ì— ìˆœë²ˆ ì—…ë°ì´íŠ¸
        this.pno = idx;

        // 3.í˜ì´ì§€ ì´ë™ + ë©”ë‰´ì— í´ë˜ìŠ¤ "on" ë„£ê¸° (ìì‹ ì œì™¸ í˜•ì œë“¤ì—ê²ŒëŠ” onë¹¼ê¸°)
        this.movePg();

    } ///////////////// chgMenu ë©”ì„œë“œ ///////////////////////////



    /*******************************************************
        ë©”ì„œë“œëª… : chkCrazy
        ê¸°ëŠ¥ : ê´‘ì  ë™ì‘ ì²´í¬í•˜ì—¬ ì œì–´, ë¦¬í„´
    *******************************************************/
    chkCrazy(seq) {
        this.prot[seq] = 1;
        // ì¼ì • ì‹œê°„ í›„ í’€ì–´ì£¼ê¸°
        setTimeout(() => { this.prot[seq] = 0; }, this.sc_speed);
        // this.sc_speed : ìƒì„±ì‹œ ì„¸íŒ…ê°€ëŠ¥í•œ ì´ë™ì‹œê°„(ì´ë™ì‹œê°„ë™ì•ˆ ë§‰ê¸°)
    } ////////////////// chkCrazy ë©”ì„œë“œ ///////////////////////



    /*******************************************************
        ë©”ì„œë“œëª… : moveThis.pg
        ê¸°ëŠ¥ : í˜ì´ì§€ ì´ë™
    *******************************************************/
    movePg() {
        // â­ëŒ€ìƒ : html, body -> 2ê°œë¥¼ ëª¨ë‘ ì¡ì•„ì•¼ ê³µí†µì ìœ¼ë¡œ ì ìš©ë¨!!(ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ì ìš©ë˜ê²Œ í•˜ë ¤ë©´~)â­
        $("html, body").animate({
            scrollTop: ($(window).height() * this.pno) + "px"
        }, this.sc_speed, this.easing

        );
        // ì´ë™ í›„ ì½œë°±ë©”ì„œë“œ (ìš”ì†Œ ë“±ì¥ ë©”ì„œë“œ) í˜¸ì¶œí•˜ê¸°
        // ëŒ€ìƒ : THIS.GNBë©”ë‰´, ì¸ë””ì¼€ì´í„° ë©”ë‰´
        this.gnb.eq(this.pno).addClass("on").siblings().removeClass("on");
        this.indic.eq(this.pno).addClass("on").siblings().removeClass("on");

    } ///////////////// movePg ë©”ì„œë“œ ///////////////////////










        // // ë“±ì¥í•  ìš”ì†Œ ì´ˆê¸°í™”
        // this.minfo.css({
        //     opacity: 0,
        //     transform: "translate(-50%, 50%)",
        //     transition: ".6s ease-out"
        // }); //////////// css //////////////////
        /*******************************************************
            ë©”ì„œë“œëª… : showEle
            ê¸°ëŠ¥ : í˜ì´ì§€ ì´ë™ í›„ ìš”ì†Œ ë“±ì¥í•˜ê¸°
        *******************************************************/
        // this.showEle = ()=>{
        //     // .this.minfo í˜ì´ì§€ë³„ ë“±ì¥í•˜ê¸°
        //     this.pg.eq(this.pno).find(".this.minfo").css({
        //         opacity: 1,
        //         transform: "translate(-50%, -50%)",
        //     }) /////////// css ////////////////
        //     .parents(".page").siblings().find(".this.minfo").css({
        //         opacity: 0,
        //         transform: "translate(-50%, 50%)",
        //         transition: ".6s ease-out"
        //     });;
        // } //////////////////// showEle ë©”ì„œë“œ ///////////////////////
        // ìµœì´ˆ í˜¸ì¶œí•˜ê¸°
        // setTimeout(showEle, 1000);
        

} ///////// AutoScroll í´ë˜ìŠ¤ /////////////////







// ğŸ”¥í´ë˜ìŠ¤ ë‚´ë³´ë‚´ê¸° /////////////
export default AutoScroll;
