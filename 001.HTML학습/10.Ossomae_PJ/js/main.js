// μ·μ†λ§¤ κ°¤λ¬λ¦¬ JS - main.js

///////////////// λ΅λ”©κµ¬μ—­ ///////////////////////
window.addEventListener("DOMContentLoaded", () => {
    console.log("λ΅λ”©μ™„λ£!");

    // κ΄‘ν΄κΈμ§€λ³€μ : 0 - ν—μ©, 1 - λ¶ν—μ©
    let prot = 0;

    // λ€μƒ: .gbx
    const gbx = document.querySelector(".gbx");

    /********************************************************
        ν•¨μλ… : goSlide
        κΈ°λ¥ : μ΄λ™λ°©ν–¥μ— λ”°λ¥Έ μ”μ† μ΄λ™ν•κΈ°
    ********************************************************/
    const goSlide = (dir) => {
        // dir : λ²„νΌ κµ¬λ¶„ν•κΈ°μ„ν•΄ λ°›λ” νλΌλ―Έν„°! (1 : μ¤λ¥Έμ½ / 0 : μ™Όμ½)

        // 0.κ΄‘ν΄κΈμ§€ μ„¤μ •ν•κΈ° //////
        if (prot) return;
        prot = 1; // μ κΈ!
        setTimeout(() => {
            prot = 0; // ν•΄μ !
        }, 400); /// 0.4μ΄ν›„ ν•΄μ ! ///

        // 1.νΈμ¶ν™•μΈ
        console.log("λ‚μ•Όλ‚!: ", dir);

        // 2.λ€μƒμ„ μ •ν•κΈ°
        // μ΄λ™λλ” λ€μƒ : .gbx>div
        let tg = gbx.querySelectorAll("div");

        // 3.λ¶„κΈ°ν•κΈ°
        ////////////////////// 3-1.μ¤λ¥Έμ½λ²„νΌ ν΄λ¦­μ‹ ///////////////////
        if (dir) {
            // μ²«λ²μ§Έ μμ‹μ”μ† div λ§¨ λ’¤λ΅ μ΄λ™
            // appendChild(μ²«λ²μ§Έμ”μ†)
            gbx.appendChild(tg[0]);
        } //////////////////// if : μ¤λ¥Έμ½λ²„νΌ ν΄λ¦­ /////////////////////////
        /////////////////////// 3-2.μ™Όμ½λ²„νΌ ν΄λ¦­μ‹ ///////////////////////
        else {
            // λ§μ§€λ§‰ μμ‹μ”μ† div λ§¨ μ•μΌλ΅ μλΌλ‚΄μ„ μ΄λ™
            // insertBefore(λ§μ§€λ§‰μ”μ†, μ²«λ²μ§Έμ”μ†)
            gbx.insertBefore(tg[tg.length - 1], tg[0]);
        } //////////////////// else : μ™Όμ½λ²„νΌ ν΄λ¦­ //////////////////////////
    }; ///////////////////// goSlide ν•¨μ /////////////////////////




    // π“μ¤λ¥Έμ½ λ²„νΌ ν΄λ¦­μ‹ ////////////////////////////
    document.querySelector(".rb").onclick = () => {
        // 1.μ¬λΌμ΄λ“ν•¨μ νΈμ¶
        goSlide(1)
        // 2.μλ™νΈμ¶ μ§€μ°κΈ°
        clearAuto();
    }; /////////////////// click //////////////////////

    // π“μ™Όμ½ λ²„νΌ ν΄λ¦­μ‹ /////////////////////////////
    document.querySelector(".lb").onclick = () => {
        // 1.μ¬λΌμ΄λ“ν•¨μ νΈμ¶
        goSlide(0)
        // 2.μλ™νΈμ¶ μ§€μ°κΈ°
        clearAuto();
    }; /////////////////// click //////////////////////


    // μΈν„°λ°ν•¨μ μ§€μ°κΈ°μ„ν• λ³€μ
    let autoI;
    // νƒ€μ„μ•„μ›ƒν•¨μ μ§€μ°κΈ°μ„ν• λ³€μ
    let autoT;



    /************************************ 
        ν•¨μλ…: autoSlide
        κΈ°λ¥: μΈν„°λ°ν•¨μλ΅ μ¬λΌμ΄λ“ν•¨μ νΈμ¶
    ************************************/
    function autoSlide() {
        console.log("μΈν„°λ°μ‹μ‘!");
        // μΈν„°λ°ν•¨μλ΅ μ¬λΌμ΄λ“ν•¨μ νΈμ¶ν•κΈ°
        autoI = setInterval(() => goSlide(1), 3000);
    } ////////////// autoSlideν•¨μ //////////

    // μλ™λ„κΉ€ μµμ΄νΈμ¶!
    autoSlide();


    
    /************************************ 
        ν•¨μλ…: clearAuto
        κΈ°λ¥: μΈν„°λ°ν•¨μλ¥Ό μ§€μ°κ³  λ‹¤μ‹μ…‹ν…
   ************************************/
    function clearAuto() {
        console.log("μΈν„°λ°λ©μ¶¤!");
        // 1. μΈν„°λ° μ§€μ°κΈ°
        clearInterval(autoI);

        // 2. νƒ€μ„μ•„μ›ƒλ„ μ§€μ°μ§€ μ•μΌλ©΄
        // μ“μ—¬μ„ νƒ€μ„μ•„μ›ƒ μ“°λ‚λ―Έμ‹¤ν–‰μ΄ λ°μƒν•λ‹¤!
        clearTimeout(autoT);

        // 3. μ μ‹ν›„ λ‹¤μ‹ μ‘λ™ν•λ„λ΅ νƒ€μ„μ•„μ›ƒμΌλ΅
        // μΈν„°λ°ν•¨μλ¥Ό νΈμ¶ν•λ‹¤!
        // 5μ΄ν›„(μΈν„°λ°μ€ 3μ΄ν›„, ν† νƒ 8μ΄ν›„ μ‘λ™μ‹μ‘)
        autoT = setTimeout(autoSlide, 5000);
    } ///////// clearAuto ν•¨μ /////////////





}); ///////////// λ΅λ”©κµ¬μ—­ //////////////////////
/////////////////////////////////////////////////
