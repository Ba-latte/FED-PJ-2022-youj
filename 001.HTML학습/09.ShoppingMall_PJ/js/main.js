// ÏáºÌïëÎ™∞ Î∞∞ÎÑà JS - 01.Í∞ÄÎ°úÎ∞©Ìñ• Î∞∞ÎÑà Ïä¨ÎùºÏù¥Îìú //

// HTMLÌÉúÍ∑∏ Î°úÎî©ÌõÑ loadFnÌï®Ïàò Ìò∏Ï∂ú! ///
window.addEventListener("DOMContentLoaded", loadFn);

/***************************************************** 
    [ Ïä¨ÎùºÏù¥Îìú Ïù¥Îèô Í∏∞Îä•Ï†ïÏùò ]
    1. Ïù¥Î≤§Ìä∏ Ï¢ÖÎ•ò: click
    2. Ïù¥Î≤§Ìä∏ ÎåÄÏÉÅ: Ïù¥ÎèôÎ≤ÑÌäº(.abtn)
    3. Î≥ÄÍ≤Ω ÎåÄÏÉÅ: Ïä¨ÎùºÏù¥Îìú Î∞ïÏä§(#slide)
    4. Í∏∞Îä• ÏÑ§Í≥Ñ:

        (1) Ïò§Î•∏Ï™Ω Î≤ÑÌäº ÌÅ¥Î¶≠Ïãú Îã§Ïùå Ïä¨ÎùºÏù¥ÎìúÍ∞Ä
            ÎÇòÌÉÄÎÇòÎèÑÎ°ù Ïä¨ÎùºÏù¥Îìú Î∞ïÏä§Ïùò leftÍ∞íÏùÑ
            -100%Î°ú Î≥ÄÍ≤ΩÏãúÌÇ®Îã§.
            -> Ïä¨ÎùºÏù¥Îìú Ïù¥ÎèôÌõÑ!!! 
            Î∞îÍπ•Ïóê ÎÇòÍ∞ÄÏûàÎäî Ï≤´Î≤àÏß∏ Ïä¨ÎùºÏù¥Îìú
            liÎ•º ÏûòÎùºÏÑú Îß®Îí§Î°ú Î≥¥ÎÇ∏Îã§!
            ÎèôÏãúÏóê leftÍ∞íÏùÑ 0ÏúºÎ°ú Î≥ÄÍ≤ΩÌïúÎã§!

        (2) ÏôºÏ™ΩÎ≤ÑÌäº ÌÅ¥Î¶≠Ïãú Ïù¥Ï†Ñ Ïä¨ÎùºÏù¥ÎìúÍ∞Ä
            ÎÇòÌÉÄÎÇòÎèÑÎ°ù ÌïòÍ∏∞ÏúÑÌï¥ Ïö∞ÏÑ† Îß®Îí§ liÎ•º
            Îß®ÏïûÏúºÎ°ú Ïù¥ÎèôÌïòÍ≥† ÎèôÏãúÏóê leftÍ∞íÏùÑ
            -100%Î°ú Î≥ÄÍ≤ΩÌïúÎã§.
            Í∑∏ ÌõÑ leftÍ∞íÏùÑ 0ÏúºÎ°ú Ïï†ÎãàÎ©îÏù¥ÏÖòÌïòÏó¨
            Ïä¨ÎùºÏù¥ÎìúÍ∞Ä ÏôºÏ™ΩÏóêÏÑú Îì§Ïñ¥Ïò®Îã§.

        (3) Í≥µÌÜµÍ∏∞Îä•: Ïä¨ÎùºÏù¥Îìú ÏúÑÏπòÌëúÏãú Î∏îÎ¶ø
            - Î∏îÎ¶ø ÎåÄÏÉÅ: .indic li
            - Î≥ÄÍ≤Ω ÎÇ¥Ïö©: Ïä¨ÎùºÏù¥Îìú ÏàúÎ≤àÍ≥º Í∞ôÏùÄ ÏàúÎ≤àÏùò
            liÏóê ÌÅ¥ÎûòÏä§ "on"Ï£ºÍ∏∞(ÎÇòÎ®∏ÏßÑ ÎπºÍ∏∞->Ï¥àÍ∏∞Ìôî!)

*****************************************************/

/****************************************** 
    Ìï®ÏàòÎ™Ö: loadFn
    Í∏∞Îä•: Î°úÎî© ÌõÑ Î≤ÑÌäº Ïù¥Î≤§Ìä∏ Î∞è Í∏∞Îä•Íµ¨ÌòÑ
******************************************/

function loadFn(){
    // 0.Ìò∏Ï∂ú ÌôïÏù∏
    console.log("Î°úÎî© ÏôÑÎ£å!");

    // üíïÏä¨ÎùºÏù¥Îìú liÎ¶¨Ïä§Ìä∏
    let slist = document.querySelectorAll("#slide>li");
    // : ÏûòÎùºÎÇ¥Í∏∞Î°ú liÏàúÎ≤àÏù¥ Îí§ÏÑûÏù¥ÎØÄÎ°ú Î∏îÎ¶ø Î≥ÄÍ≤Ω Îß§Ïπ≠ÏùÑ ÏúÑÌïú Í≥†Ïú†Ìïú ÏàúÎ≤àÏùÑ 'ÏÇ¨Ïö©ÏûêÏ†ïÏùò' ÏÜçÏÑ±(data-)ÏúºÎ°ú  ÎßåÎì§Ïñ¥Ï£ºÍ∏∞!!

    slist.forEach((ele,idx)=>{
        // data-seq ÎùºÎäî ÏÇ¨Ïö©ÏûêÏ†ïÏùò ÏÜçÏÑ±ÏùÑ ÎßåÎì§Ïñ¥ÏÑú ÏßëÏñ¥ÎÑ£Í∏∞
        ele.setAttribute("data-seq",idx);
    }); ////// forEach ///////////

    // 1.ÎåÄÏÉÅ ÏÑ†Ï†ï
    // 1-1.Ïù¥Î≤§Ìä∏ ÎåÄÏÉÅ : .abtn
    const abtn = document.querySelectorAll(".abtn");
    // console.log(abtn);
    // 1-2.Î≥ÄÍ≤Ω ÎåÄÏÉÅ : #slide
    const slide = document.querySelector("#slide");
    // 1-3.Î∏îÎ¶ø ÎåÄÏÉÅ : .indic
    const indic = document.querySelectorAll(".indic li");
    // console.log(indic);


    // üçì4-1.Í¥ëÌÅ¥ Í∏àÏßÄ Î≥ÄÏàò ÎßåÎì§Í∏∞
    let prot = 0;
    // : 0 - ÌóàÏö© / 1 - Î∂àÌóàÏö©
    // : Ìï®Ïàò Î∞îÍπ•Ïóê ÎßåÎì§Ïñ¥ÏÑú ÏÉÅÎåÄÏ†ÅÏúºÎ°ú Ï†ÑÏó≠Î≥ÄÏàòÎ°ú ÎßåÎì§Í≥†, Í≥µÍ∞ÑÏùÑ ÌôïÎ≥¥Ìï®

    // 2.Ïä¨ÎùºÏù¥Îìú Î≥ÄÍ≤Ω Ìï®Ïàò ÎßåÎì§Í∏∞ - Ìï†ÎãπÌòï Ìï®ÏàòÎ°ú ÎßåÎì§Í∏∞
    // Ìò∏Ï∂úÏãú seqÏóê Îì§Ïñ¥Ïò§Îäî Í∞í Ï§ëÏóêÏÑú 1ÏùÄ Ïò§Î•∏Ï™Ω, 0ÏùÄ ÏôºÏ™ΩÏûÑ!!
    const goSlide = (seq)=>{
        // ÌôïÏù∏
        // console.log("Ïä¨ÎùºÏù¥ÎìúÍ≥†Ïö∞!", seq);
        


        // üçì4.Í¥ëÌÅ¥ Í∏àÏßÄ ÏÑ§Ï†ïÌïòÍ∏∞
        // : Í≥ÑÏÜç ÏâºÏóÜÏù¥ ÌÅ¥Î¶≠ÌïòÎ©¥ Ïù¥ÎØ∏ÏßÄÍ∞Ä Î≤ÑÎ≤ÖÍ±∞Î¶¨Î©¥ÏÑú Ïûò ÏïàÎÑòÏñ¥Í∞ÄÏßÑÎã§! Í∑∏Í±∏ Î∞©ÏßÄÌïòÍ∏∞ ÏúÑÌï®!!
        // how)Î∞©Î¨∏ Ïû†Í∑∏Í≥† Î™ªÎì§Ïñ¥Ïò§Í≤å Ìï¥Ï£ºÎ©¥ Îê®! -> Î™ªÎì§Ïñ¥Í∞Ä ÎèåÏïÑÍ∞Ä! -> Î¶¨ÌÑ¥!
        console.log("Î™ªÎì§Ïñ¥Í∞îÏñ¥!!!!!");
        // üçì4-2.Í¥ëÌÅ¥Í∏àÏßÄ ÏÑ§Ï†ïÌïòÍ∏∞
        if(prot) return;
        prot = 1;
        // ifÎ¨∏ÏúºÎ°ú Ï†úÏñ¥Ìï¥ÏÑú ÌïúÎ™ÖÎßå Îì§Ïñ¥Í∞ÄÍµ¨ Î∞îÎ°ú Î∞©Î¨∏ÏùÑ Ïû†Í∞ÄÎ≤ÑÎ†§!
        console.log("ÎÇú Îì§Ïñ¥ÏôîÏñ¥!!!");
        // Ï†ïÌï¥ÏßÑ ÏãúÍ∞ÑÏù¥ ÏßÄÎÇú ÌõÑ (Ïä¨ÎùºÏù¥Îìú ÎÑòÏñ¥Í∞ÄÎäî Ìä∏ÎûúÏßÄÏÖò ÏãúÍ∞ÑÏù¥ ÏßÄÎÇú ÌõÑ), Îã§Ïãú Î∞©Î¨∏ Ïó¥Ïñ¥Ï£ºÍ∏∞!
        setTimeout(() => {
            prot = 0;
            // Î∞©Î¨∏ Ïó¥Ïñ¥Ï£ºÍ∏∞!
        }, 400);
        // tip) Í∑∏Î¶¨Í≥† ÏãúÍ∞ÑÍ∞ôÏùÄÍ±¥ Î∞îÎÄî Ïàò ÏûàÏúºÎãàÍπå Î≥ÄÏàòÎ°ú Ï≤òÎ¶¨Ìï¥Ï£ºÎ©¥ Îçî ÍµøÍµø~!



        // 2-0.ÌòÑÏû¨Ïùò Ïä¨ÎùºÏù¥Îìú li ÏàòÏßëÌïòÍ∏∞
        let clist = slide.querySelectorAll("li");
        // : clist : current list ÌòÑÏû¨ Î¶¨Ïä§Ìä∏ ÏùòÎØ∏Ìï®

        // 2-1. Î∞©Ìñ•Ïóê Îî∞Î•∏ Î∂ÑÍ∏∞
        // 2-1-1. Ïò§Î•∏Ï™Ω Î≤ÑÌäº ÌÅ¥Î¶≠Ïãú : seq===1
        if(seq){
            
            // ÌôïÏù∏
            console.log("Ïò§Î•∏!");

            // (1) Ïò§Î•∏Ï™Ω Î≤ÑÌäº ÌÅ¥Î¶≠Ïãú Îã§Ïùå Ïä¨ÎùºÏù¥ÎìúÍ∞Ä
            // ÎÇòÌÉÄÎÇòÎèÑÎ°ù Ïä¨ÎùºÏù¥Îìú Î∞ïÏä§Ïùò leftÍ∞íÏùÑ
            // -100%Î°ú Î≥ÄÍ≤ΩÏãúÌÇ®Îã§.
            slide.style.left = "-100%";
            // üì¢->> Îî± ÌïúÎ≤àÎßå Ïù¥ÎèôÌïòÍ≤å ÏÑ∏ÌåÖÌï¥ÎëêÍ∏∞
            slide.style.transition = "left .4s ease-in-out";
    
    
            // (2) Ïä¨ÎùºÏù¥Îìú Ïù¥ÎèôÌõÑ!!! 
            setTimeout(()=>{
                // : 0.4Ï¥à ÏßÄÎÇòÍ≥† Ïä¨ÎùºÏù¥ÎìúÍ∞Ä Ïù¥ÎèôÌïú ÌõÑ ÎßêÌï®
                
                // (2-1)Î∞îÍπ•Ïóê ÎÇòÍ∞ÄÏûàÎäî Ï≤´Î≤àÏß∏ Ïä¨ÎùºÏù¥Îìú liÎ•º ÏûòÎùºÏÑú Îß®Îí§Î°ú Î≥¥ÎÇ∏Îã§!
                slide.appendChild(clist[0]);
    
                // (2-2)ÎèôÏãúÏóê leftÍ∞íÏùÑ 0ÏúºÎ°ú Î≥ÄÍ≤ΩÌïúÎã§!
                slide.style.left="0";
    
                // (2-3)Î∞ñÏùò Ï≤´Î≤àÏß∏ liÎ•º ÏûòÎùºÏÑú Îß®Îí§Î°ú Î≥¥ÎÇ¥Î©¥ÏÑú ÎèôÏãúÏóê leftÍ∞íÏùÑ 0ÏúºÎ°ú Î∞îÍæ∏ÎäîÍ±∏...Ïù¥Î†áÍ≤å ÏõÄÏßÅÏù¥Îäî Í±∏ Íµ≥Ïù¥ Î≥¥Ïó¨Ï§Ñ ÌïÑÏöî ÏóÜÍ∏∞ ÎïåÎ¨∏Ïóê Ìä∏ÎûúÏßÄÏÖòÏùÑ ÏóÜÏï†Ï£ºÎ©¥ Îê®
                slide.style.transition = "none";
    

            },400); /////////////////// ÌÉÄÏûÑ ÏïÑÏõÉ ÎÅù ///////////////////
        } ////////////////////// ifÎ¨∏ : Ïò§Î•∏Ï™Ω ÌÅ¥Î¶≠Ïãú /////////////////////////////
        
        // 2-1-2. ÏôºÏ™Ω Î≤ÑÌäº ÌÅ¥Î¶≠Ïãú : seq===0
        else{

            // ÌôïÏù∏
            console.log("Ïôº!");

            // (1) ÏôºÏ™ΩÎ≤ÑÌäº ÌÅ¥Î¶≠Ïãú Ïù¥Ï†Ñ Ïä¨ÎùºÏù¥ÎìúÍ∞Ä ÎÇòÌÉÄÎÇòÎèÑÎ°ù ÌïòÍ∏∞ÏúÑÌï¥ Ïö∞ÏÑ† Îß®Îí§ liÎ•º Îß®ÏïûÏúºÎ°ú Ïù¥ÎèôÌïúÎã§ 
            // slide.insertBefore(ÎÑ£ÏùÑÎÜà, ÎÑ£ÏùÑÎÜàÏ†ÑÎÜà);
            // slide.insertBefore(Îß®ÎÅù li, Îß®Ïïû li);
            slide.insertBefore(clist[clist.length - 1], clist[0]);
            
            // (2) ÎèôÏãúÏóê leftÍ∞íÏùÑ -100%Î°ú Î≥ÄÍ≤ΩÌïúÎã§.
            slide.style.left = "-100%";
            // : Ïïà ÌäÄÍ≤å ÎßåÎì§Í∏∞ ÏúÑÌï®
            // ->>Ïù¥Îïå Ìä∏ÎûúÏßÄÏÖòÎèÑ ÏóÜÏï†Ï§òÏïº, Î∞îÍπ•Ï™ΩÏóêÏÑúÎäî Ìä∏ÎûúÏßÄÏÖòÏù¥ ÏóÜÏñ¥ÏÑú ÌåçÌåç ÌäÄÏßÄ ÏïäÎäîÎã§;;
            // (Ï≤òÏùåÏóêÎßå ÏóÜÏßÄ, ÌïúÎ≤à Ïã§ÌñâÌõÑÎ∂ÄÌÑ∞Îäî ÏÉùÍ∏∞ÎØÄÎ°ú.....)
            slide.style.transition = "none";

            // (3) Í∑∏ ÌõÑ leftÍ∞íÏùÑ 0ÏúºÎ°ú Ïï†ÎãàÎ©îÏù¥ÏÖòÌïòÏó¨ Ïä¨ÎùºÏù¥ÎìúÍ∞Ä ÏôºÏ™ΩÏóêÏÑú Îì§Ïñ¥Ïò®Îã§.
            // slide.style.left = "0";
            // : Ïù¥Î†áÍ≤å Ìï¥ÎëêÎ©¥ ÎÑàÎ¨¥ ÎπõÏúº ÏÜçÎèÑÎ°ú...Ìï¥ÏÑú.. Î≥ÄÌï®Ïù¥ ÏóÜÏñ¥Î≥¥Ïó¨;; Í∑∏ÎûòÏÑú ÏΩîÎî©Í≥µÍ∞ÑÏùÑ Íµ¨Î∂ÑÌïòÎ©¥! Í∑∏Îü¨Î©¥ Ï°∞Í∏àÏù¥ÎùºÎèÑ ÏãúÏ∞®Í∞Ä ÏÉùÍπÄ!! -> Ïù¥Îïå ÏÇ¨Ïö©ÌïòÎäî Í≤å setTimeoutÏù¥Îûò!
            // üì¢üì¢Ïå§Ïôà: ÎèôÏùº ÏÜçÏÑ±Ïù∏ leftÍ∞Ä Í∞ôÏùÄ ÏΩîÎî© Ï≤òÎ¶¨ Í≥µÍ∞ÑÏóêÏÑú ÎèôÏãúÏóê ÏûàÏúºÎØÄÎ°ú, Ïù¥Í≤ÉÏùÑ Î∂ÑÎ¶¨Ìï¥Ïïº Ìö®Í≥ºÍ∞Ä ÏûàÎã§! Ïù¥Îïå Ïì∞ÎäîÍ≤å setTimeoutÏûÑ!!
            setTimeout(()=>{
                slide.style.left = "0";
                slide.style.transition = "left .4s ease-in-out";
            }, 0); ///////////////////// ÌÉÄÏûÑ ÏïÑÏõÉ ////////////////////////////

        } //////////////////////// elseÎ¨∏ : ÏôºÏ™Ω ÌÅ¥Î¶≠Ïãú //////////////////////////////////


        // 5.ÌòÑÏû¨ Ïä¨ÎùºÏù¥Îìú ÏàúÎ≤àÍ≥º Í∞ôÏùÄ Î∂àÎ¶ø ÌëúÏãúÌïòÍ∏∞
        // ÎåÄÏÉÅ : .indic li -> indic Î≥ÄÏàò
        // indic[ÏàúÎ≤à].classList.add("on")
        // ÌòÑÏû¨ ÏàúÎ≤àÏùÑ Î™®Î•¥Í≤†ÏúºÎãàÍπå „Öã„Öã„Öã ÌòÑÏû¨ ÏàúÎ≤à ÏΩòÏÜîÏóê Ï∞çÏñ¥Î≥¥Í∏∞
        // 5-1.ÌòÑÏû¨ Î∞∞ÎÑà Î¶¨Ïä§Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏ ÌïòÍ∏∞!!
        clist = slide.querySelectorAll("li");
        // Ïò§Î•∏Ï™Ω ÌÅ¥Î¶≠Ïãú ÎëêÎ≤àÏß∏ Ïä¨ÎùºÏù¥Îìú[1] -> Ï¶â (seq===1)
        // ÏôºÏ™Ω ÌÅ¥Î¶≠Ïãú Ï≤´Î≤àÏß∏ Ïä¨ÎùºÏù¥Îìú[0] -> Ï¶â (seq===0)
        // ->>>>> seqÏàúÎ≤àÍ≥º ÏùΩÏñ¥Ïò¨ Ïä¨ÎùºÏù¥ÎìúÏùò ÏàúÎ≤àÏù¥ ÏùºÏπòÌïúÎã§!!

        // 5-2.Î∞©Ìñ•Î≥ÑÎ°ú ÏùΩÏñ¥Ïò¨ Ïä¨ÎùºÏù¥ÎìúÎ•º ÏàúÎ≤àÏúºÎ°ú "data-seq"Í∞í ÏùΩÏñ¥Ïò§Í∏∞
        let cseq = clist[seq].getAttribute("data-seq")
        console.log("ÌòÑÏû¨ ÏàúÎ≤à: ", cseq);


        // 5-4.Î∏îÎ¶ø Ï¥àÍ∏∞ÌôîÌïòÍ∏∞
        for(let x of indic) x.classList.remove("on");

        // 5-3.ÏùΩÏñ¥Ïò® Ïä¨ÎùºÏù¥Îìú ÏàúÎ≤àÏùò Î∏îÎ¶øÏóê ÌÅ¥ÎûòÏä§ "on"ÎÑ£Í∏∞
        indic[cseq].classList.add("on")




    }; //////////////// goSlide Ìï®Ïàò ÎÅù /////////////////////

    // 3.ÎåÄÏÉÅÏóê Ïù¥Î≤§Ìä∏ ÏÑ§Ï†ïÌïòÍ∏∞
    // : abtnÎ≤ÑÌäº ÌÅ¥Î¶≠ÌïòÎ©¥ 
    abtn.forEach((ele, idx)=>{
        ele.onclick = ()=>{
            goSlide(idx);
        }; //////////// onclick ÎÅù ///////////////
    }); //////////////////////// forEach ÎÅù /////////////////////////////

} //////////////// loadFn Ìï®Ïàò ///////////////
/////////////////////////////////////////////