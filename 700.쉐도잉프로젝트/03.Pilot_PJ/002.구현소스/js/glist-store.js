// ì „ì²´ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ ë·°ì—‘ìŠ¤ ìŠ¤í† ì–´ ì„¸íŒ… JS - glist-store.js

// ì „ì²´ ìƒí’ˆ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
import gdata from "./gdsData/glist-items.js";

const store = new Vuex.Store({
    state:{
        // ì„œë¸Œë°ì´í„° ì…‹ì—…
        // ì „ì²´ìƒí’ˆì •ë³´ ì „ì—­í™”í•˜ê¸°
        // ì•ì€ stì˜ gdata, ë’¤ëŠ” glist-itemsì˜ gdata!!
        gdata:gdata,

        // í•„í„° ë°ì´í„°ìš© ë°°ì—´ ë³€ìˆ˜ ë§Œë“¤ê¸° : ì²´í¬/ì–¸ì²´í¬ í™•ì¸->t/fê°€ ì´ ë°°ì—´ì•ˆì— ë“¤ì–´ê°
        chkarr:[true, true, true],
        // ğŸ‘‰ë§¨ì²˜ìŒì— ëª¨ë“  ì œí’ˆ ë‹¤ ë³´ì´ê²Œ í•˜ê¸° ìœ„í•´ì„  ì „ë¶€ë‹¤ ë³´ì´ê²Œ trueë¡œ í•´ë‘ê¸°

        // í•„í„° ë°ì´í„°ìš© ë°°ì—´ ì…ë ¥ê°’ ë³€ìˆ˜ : ì´ ê°’ì´ v-ifë¬¸ ì•ˆì— ë“¤ì–´ê°
        selnm:["", "", ""],

        // í˜ì´ì§•ìš© ë³€ìˆ˜ : ì´ ë³€ìˆ˜ë¥¼ ë”í•´ì„œ ì‚¬ì´ ë²”ìœ„ë¥¼ ë§Œë“¤ì–´ ì¤€ë‹¤!
        pnum:0,

        // moreìš© ë³€ìˆ˜ : ì´ ë³€ìˆ˜ë¥¼ ë”í•´ì„œ 1ë²ˆë¶€í„° ëª‡ê°œê¹Œì§€ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ë¥¼ ê²°ì •í•œë‹¤!
        mnum:0,

        // moreë²„íŠ¼ í‘œì‹œìœ ë¬´ ìƒíƒœê´€ë¦¬ ë³€ìˆ˜
        mbtn:true,
    },
    // state ë°ì´í„° ë³€ê²½ ë©”ì„œë“œ êµ¬ì—­
    mutations:{
        // ì²´í¬ë°•ìŠ¤ ì²´í¬ì‹œ ì²˜ë¦¬ë©”ì„œë“œ
        resCheck(dt){
            console.log("ì²´í¬: ", dt.chkarr);
            // 3ê°œì˜ ì²´í¬ë°•ìŠ¤ ìƒíƒœë°°ì—´ ë³€ìˆ˜ê°’ì— ë”°ë¼ ì‹¤ì œ ì¡°ê±´ì— ë“¤ì–´ê°ˆ catëª…ì„ ë„£ì–´ì¤€ë‹¤!
            dt.chkarr.forEach((v,i)=>{
                // v-ë°°ì—´ê°’ì¸ true/falseê°’ì´ ë“¤ì–´ì˜´
                if(v){
                    // ì²´í¬ë°•ìŠ¤ ì²´í¬ëœ ê²½ìš°

                    dt.selnm[i] = i==0?"men":i==1?"women":"style";
                    // ì¡°ê±´1?ê°’1:((ì¡°ê±´2?ê°’2):ìµœì¢…ê°’);
                    // ì¤‘ì²© ì‚¼í•­ì—°ì‚°ì ì‚¬ìš©
                } ////////////// if : ì²´í¬ë°•ìŠ¤ ì²´í¬ëœ ê²½ìš° //////////////////
                else{
                    // ì²´í¬ë°•ìŠ¤ ì²´í¬ ì•ˆ ëœ ê²½ìš°
                    // ë¬´ì¡°ê±´ ë¹ˆ ê°’ì„ í• ë‹¹í•´ì•¼í•¨
                    dt.selnm[i] = "";
                } ///////////// else : ì²´í¬ë°•ìŠ¤ ì²´í¬ ì•ˆ ëœ ê²½ìš° //////////////////
            });
        }, //////////////////// resCheck ë©”ì„œë“œ //////////////////////////

        // í˜ì´ì§• ë³€ìˆ˜ ì—…ë°ì´íŠ¸ ë©”ì„œë“œ
        updatePaging(dt, pm){
            dt.pnum = pm;
            // pnum-ë¦¬ìŠ¤íŠ¸ë²”ìœ„ ìˆ˜
            // pm-ì—…ë°ì´íŠ¸í•  ì „ë‹¬ëœ ìˆ«ì
        }, ///////////////// updatePaging ë©”ì„œë“œ //////////////

        // more ë³€ìˆ˜ ì—…ë°ì´íŠ¸ ë©”ì„œë“œ
        updateMore(dt, pm){
            // mnumì€ ëª¨ì–´ ë²”ìœ„ìŠ¤ : += ë¡œ ì—¬ëŸ¬ë²ˆ ëª¨ì–´ ì§„í–‰í•˜ê¸°
            dt.mnum += pm;
            // mnum-moreì˜ ë²”ìœ„ ìˆ˜
            // pm-ì—…ë°ì´íŠ¸í•  ì „ë‹¬ëœ ìˆ«ì

            // ì—…ë°ì´íŠ¸ í›„ ëª¨ì–´ë²„íŠ¼ ì—†ì• ê¸° (í•œê³„ìˆ˜(ì œí’ˆ ì´ ê°¯ìˆ˜)ë¥¼ ë„˜ìœ¼ë©´ ì—†ì–´ì§€ê²Œ í•˜ê¸°)
            if(dt.mnum>=25){
                dt.mbtn = false;
            }
        }, ///////////////// updateMore ë©”ì„œë“œ //////////////

        // [ ğŸŒˆì¥ë°”êµ¬ë‹ˆ ë°ì´í„° ì—…ë°ì´íŠ¸ ë©”ì„œë“œğŸŒˆ ] /////////////
        setData(dt, pm){
            // pm-ë°°ì—´ë°ì´í„° ìˆœë²ˆ
            console.log("êµ¬ë‹ˆì…‹ : ", pm);
            console.log("ì„ íƒ gdata : ", dt.gdata[pm]);
            console.log("cart ì „ : ", localStorage.getItem("cart"));

            // 1.ë¡œì»¬ìŠ¤ ë°ì´í„° cartê°€ ì—†ìœ¼ë©´(ë„ê°’ì´ë©´) [](ë°°ì—´í˜•ì‹)ìœ¼ë¡œ ë¬¸ì(string)ë„£ê¸°!
            if(localStorage.getItem("cart")==null){
                localStorage.setItem("cart", "[]");
            }
            console.log("cart í›„ : ", localStorage.getItem("cart"));

            // 2.ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ê°ì²´ë°ì´í„° ê°€ì ¸ì˜¤ê¸° : ì…ë ¥ëœ ë°ì´í„°ëŠ” ë¬¸ìí˜• ê°ì²´ì´ë¯€ë¡œ ë‹¤ì‹œ íŒŒì‹±í•˜ì—¬ ì›ë˜ ê°ì²´ë¡œ ë³µì›í•œë‹¤!
            let org = localStorage.getItem("cart");
            org = JSON.parse(org);
            console.log("ë³€í™˜ ê°ì²´(ë°°ì—´ë¡œ ë§Œë“¤ë ¤ê³  ë³€í™˜ì‹œí‚¤ëŠ”ê±°ì•¼):", org);
            
            
            // ì´ë¯¸ ì„ íƒí•œ ìƒí’ˆì¼ ê²½ìš° ë¶„ê¸°í•˜ê¸°
            // ì €ì¥ìƒíƒœ ë³€ìˆ˜ : ê¸°ë³¸ê°’ì´ trueë¡œ í•˜ê¸°
            let save = true;
            org.forEach(v=>{
                // ë§Œì•½ì— orgì˜ ê°ê° ê°’ì˜ idxê°€ setDataì˜ dtì˜ pmë²ˆì§¸ gdaaì˜ idxì™€ ê°™ë‹ˆ?
                // ê°™ì€ ë°ì´í„°ì¸ê°€? (idxê°’ìœ¼ë¡œ ë¹„êµ)
                // ->>v.idxëŠ” í˜„ì¬ ì¹´íŠ¸ì— ìˆëŠ” ì•„ì´í…œ ìˆœë²ˆì„ ë§í•˜ê³  dt.gdata[pm].idxëŠ” ì…ë ¥í•˜ë ¤ëŠ” ìƒˆë¡œìš´ ì•„ì´í…œ idxë¥¼ ë§í•¨
                if(v.idx == dt.gdata[pm].idx){
                    alert("ì´ë¯¸ ì„ íƒí•˜ì‹  ìƒí’ˆì…ë‹ˆë‹¤!");
                    // ì €ì¥ìƒíƒœ ë³€ìˆ˜ë¥¼ falseë¡œ ë°”ê¾¸ê¸°
                    save = false;
                } ////////// if /////////////////
                
            }) /////////// forEach ////////////////


            // ë§Œì•½ì— saveê°€ trueì¼ ë•Œë§Œ ë°°ì—´ì— ì œí’ˆì„ ë„£ê³  ì²˜ë¦¬í•˜ê¸°
            if(save){

                /*
                    [ ê¸°ì¡´ ë°ì´í„° êµ¬ì¡°ì— ì»¬ëŸ¼ ì¶”ê°€í•˜ê¸° ]
                -dt.gdataì˜ ë°ì´í„° êµ¬ì¡°ëŠ” {idx: "1", cat: "men", ginfo:[...]}, ... ì„
                -ì—¬ê¸°ì— num í•­ëª©ì„ ì¶”ê°€í•˜ì—¬ ê°œìˆ˜ë°ì´í„°ë¥¼ ì…ë ¥í•¨!
                ğŸ‘‰{idx: "1", cat: "men", ginfo:[...], num: 4} ì´ëŸ°ì‹ìœ¼ë¡œ!

                -ê¸°ì¡´ ê°ì²´ì— ì†ì„± ì¶”ê°€í•˜ëŠ” ë²•ì€ ê°„ë‹¨í•¨
                -ë°©ë²• : ê°ì²´ ë³€ìˆ˜.ìƒˆí•­ëª© = ê°’;
                -ì—¬ê¸°ì„œëŠ” dt.gdata[pm]["num"] = ê°’; ì´ë¼ê³  ì“°ë©´ ë’¤ì— num ì†ì„±ì´ ì¶”ê°€ë¨!

                */

                // 3.ë°°ì—´ë’¤ì— ë°€ì–´ë„£ê¸° ë©”ì„œë“œ : push(ê°’)
                // 3-1. ë„£ê¸° ì „ì— num í•­ëª© ì¶”ê°€í•˜ê¸°
                dt.gdata[pm]["num"] = $("#sum").val();

                // 3-2. í•­ëª© ì¶”ê°€ í›„ ë°ì´í„° ë„£ê¸°!
                org.push(dt.gdata[pm]);
                console.log("pushí•œ í›„ ê°ì²´:", org);
    
                // 4.ê°ì²´ë¥¼ ë¬¸ìí˜•ìœ¼ë¡œ ë³€í™˜í›„ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ë°˜ì˜ì‹œì¼œì•¼ ì§„ì§œë¡œ ë°˜ì˜ì´ ë¨!
                localStorage.setItem("cart", JSON.stringify(org));
                console.log("ë°˜ì˜í›„ ë¡œì¹¼ì“°:", localStorage.getItem("cart"));
    
                // 5.ì¹´íŠ¸ ì• ë‹ˆë©”ì´ì…˜ ë²„íŠ¼ì„ ë“±ì¥ì‹œì¼œ ì¹´íŠ¸ë¦¬ìŠ¤íŠ¸ê¹Œì§€ ì—°ë™í•˜ê¸°
                this.commit('cartAni', {cnt:org.length, opt:1});
                // org.lengthëŠ” ë°°ì—´ ë°ì´í„° ê°œìˆ˜ë¥¼ ë„˜ê¹€ (ìš°ë¦¬ê°€ stringifyí•œ ê±¸ orgì— í• ë‹¹í•˜ì§€ ì•Šì•˜ìœ¼ë‹ˆê¹Œ orgëŠ” ê·¸ëŒ€ë¡œ ë°°ì—´í˜•ì„!)
            } //////////// if : saveê°€ trueì¼ ê²½ìš° //////////////
            
        }, ////////////// setDada ë©”ì„œë“œ /////////////////////////
        
        
        // í…ŒìŠ¤íŠ¸ í¸ì˜ìƒ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë°ì´í„° ì§€ìš°ê¸°
        clearData(){
            // íŠ¹ì • ë³€ìˆ˜(cart)ë§Œ ì§€ìš°ê¸°
            // : ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì˜ ê°œë³„í•­ëª©ë§Œ ì‚­ì œí•˜ê¸°
            localStorage.removeItem("cart");

            console.log("cart ì§€ì›Œ~!");
        }, ///////////////// clearData ë©”ì„œë“œ ////////////////////


        ///////////////// ì¥ë°”êµ¬ë‹ˆ ì• ë‹ˆë©”ì´ì…˜ ë²„íŠ¼ ìƒì„±í•˜ê¸° ///////////////////
        cartAni(dt, pm){
            // pm.cnt, pm.opt ì´ë ‡ê²Œ 2ê°œê°€ ë“¤ì–´ì˜´!
            // cnt-ì¹´íŠ¸ ì•„ì´í…œ ê°œìˆ˜
            // opt-ì„¸íŒ… ì˜µì…˜ ë²ˆí˜¸ (ì´ˆê¸° CSSê°’ ì„ íƒ ì˜µì…˜ ë²ˆí˜¸ì„)
            // opt ê°’ ì¤‘ì—ì„œ 0-ì˜¤ë¥¸ìª½ìœ„ ì‘ì€ ê²ƒ, 1-ì •ì¤‘ì•™ì˜ í° ê²ƒ

            console.log("ì¹´íŠ¸ì• ë‹ˆ! ìƒí’ˆ ê°¯ìˆ˜! : ", pm);

            // ì´ˆê¸° CSSì„¸íŒ…ê°’ ë°°ì—´
            let icss = [
                {
                    tv:"5%",
                    lv:"80%",
                    wd:"50px",
                },
                {
                    tv:"50%",
                    lv:"50%",
                    wd:"370px",
                },
            ];

            // 0.ìƒì„±ë  ì¹´íŠ¸ ì´ë¯¸ì§€ ì§€ìš°ê³  ì‹œì‘! ->ì´ë¯¸ì§€ í•˜ë‚˜ë§Œ ìƒì„±ë˜ë„ë¡!
            $("#mycart").remove();
            // : remove()ëŠ” ìˆìœ¼ë©´ ì§€ìš°ëŠ” ê±°ì§€ ì—†ë‹¤ê³  ë¬¸ì œ ì•ˆ ìƒê¹€~

            // 1. gif ì• ë‹ˆë©”ì´ì…˜ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ í™”ë©´ ì¤‘ì•™ì— ë“±ì¥í•˜ì—¬ ì¥ë°”êµ¬ë‹ˆ ë‹´ê¹€ì„ ì•Œë¦¼!
            $("body").append(`
                <img id="mycart" src="./images/mycart.gif" title="${pm.cnt}ê°œì˜ ìƒí’ˆì´ ì¹´íŠ¸ì— ìˆìŠµë‹ˆë‹¤ğŸ‘€" />
            `);

            console.log(`
                top: ${icss[pm.opt].tv}
                left: ${icss[pm.opt].lv}
                width: ${icss[pm.opt].wd}
            `);

            // 2.ì¶”ê°€í•œ ì´ë¯¸ì§€ í™”ë©´ ì¤‘ì•™ì— ìœ„ì¹˜í•˜ê¸°
            $("#mycart").css({
                position:"fixed",
                // ğŸ‘‡ë³€ê²½ë  ì„¸íŠ¸ : top, left, width
                top: icss[pm.opt].tv,
                left: icss[pm.opt].lv,
                width: icss[pm.opt].wd,
                // ğŸ‘†ë³€ê²½ë  ì„¸íŠ¸
                transform:"translate(-50%, -50%)",
                cursor:"pointer",
                zIndex:"999999999999",
            })
            .delay(3000) // 3ì´ˆ ì§€ì—°
            .animate({ // ì™¼ìª½ ìœ„ë¡œ ì´ë™, ì‘ì•„ì§€ëŠ” ì• ë‹ˆ
                top:"5%",
                left:"80%",
                width:"50px",
            }, 1000, "easeInExpo")
            // í´ë¦­í•˜ë©´ ì¹´íŠ¸ë¦¬ìŠ¤íŠ¸ ë³´ì´ê¸°
            .click(function(){

                // 1. ë§Œì•½ ì¹´íŠ¸ë¦¬ìŠ¤íŠ¸ ìš”ì†Œê°€ ì—†ìœ¼ë©´ ë§Œë“¤ê¸°!
                if($("#cartlist").length==0){
                    // tip)ê·¸ëƒ¥ lengthë¼ê³ ë§Œ í•˜ë©´ 0ì´ë©´ false / 1ì´ìƒì´ë©´ trueê°€ ë‚˜ì˜´
                    // bodyì— ì¹´íŠ¸ë¦¬ìŠ¤íŠ¸ ìš”ì†Œ ë„£ê¸°
                    $("body").append(`
                        <section id="cartlist"></section>
                    `);
                    console.log("ì¹´íŠ¸ë°•ìŠ¤ ë§Œë“¤ê¸°!");
                } ///////////// if : ì¹´íŠ¸ë¦¬ìŠ¤íŠ¸ ìš”ì†Œê°€ ì—†ëŠ” ê²½ìš° ////////////

                // ë°ì´í„° ë°”ì¸ë”©í•˜ê¸° : ì¹´íŠ¸ê°€ ë³´ì´ì§€ ì•ŠëŠ” ìƒíƒœì„! (right : "-60vw")
                store.commit("bindData", "-60vw");
                
            }) ///////// ì¹´íŠ¸ ë²„íŠ¼ click /////////////
        }, ///////////// cartAni ë©”ì„œë“œ ////////////////


        // ì¹´íŠ¸ ì•„ì´í…œ ì‚­ì œ ë©”ì„œë“œ ///////
        delRec(dt, pm){
            console.log("ì•„ì´í…œ ì‚­ì œ~!", pm);
            // 1. ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë°ì´í„° ì½ê¸°
            let org = localStorage.getItem("cart");

            // 2. ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë°ì´í„° íŒŒì‹±í•˜ê¸°
            org = JSON.parse(org);
            console.log("ì‚­ì œí•  ë•Œ) êµ¬ì„± ê°ì²´: ", org);

            // 3. ì‚­ì œí•  ì•„ì´í…œ ì°¾ì•„ì„œ ì§€ìš°ê¸° : splice(ë°°ì—´ìˆœë²ˆ, ì§€ìš¸ê°¯ìˆ˜)
            org.forEach((v, i)=>{
                if(v.idx == pm){
                    // ì§€ìš¸ ì•„ì´í…œê³¼ ê°™ìœ¼ë©´ ì§€ìš¸ ê²ƒì¸ì§€ ë¬¼ì–´ë³´ê¸° (í™•ì¸ í´ë¦­ì‹œ true, ì·¨ì†Œì‹œ false ë¦¬í„´í•¨)
                    if(confirm("ì •ë§ì •ë§ë¡œ ì§€ìš°ê² ìŠµë‹ˆê¹Œ? í• ì¸ë„ í•˜ëŠ”ë°?ğŸ˜‚")){
                        // "í™•ì¸" ëˆŒëŸ¬ì„œ trueë˜ë©´ í•´ë‹¹ë˜ëŠ” ë†ˆ ì§€ìš°ê¸°
                        org.splice(i, 1);
                    }
                }
            })

            // 4. ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ë¬¸ìí™”í•˜ì—¬ ë„£ê¸° : stringify()
            // : ê°ì²´ë¥¼ ë¬¸ìí˜•ìœ¼ë¡œ ë³€í™˜í›„ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ë°˜ì˜ì‹œì¼œì•¼ ì§„ì§œë¡œ ë°˜ì˜ì´ ë¨!
            localStorage.setItem("cart", JSON.stringify(org));
            console.log("ì‚­ì œ í›„ ë¡œì¹¼ì“°:", localStorage.getItem("cart"));

            // 5. ë¦¬ìŠ¤íŠ¸ ê°±ì‹ í•˜ê¸° : ì¹´íŠ¸ê°€ ë³´ì´ëŠ” ìƒíƒœì„ (right : "0")
            store.commit('bindData', "0");

            // 6. ì¹´íŠ¸ ë²„íŠ¼ì˜ íˆ´íŒ ë¬¸êµ¬ ì—…ë°ì´íŠ¸í•˜ê¸°
            // ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì§€ìš°ê¸°
            if(org.length == 0){
                $("#mycart").remove();
                $("#cartlist").remove();

                // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë°ì´í„° í•­ëª© ì§€ìš°ê¸°
                localStorage.removeItem("cart");
            } /////////// if : ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì•„ë¬´ê²ƒë„ ì—†ì„ ë•Œ /////////////
            // ë°ì´í„° ê°¯ìˆ˜ ì—…ë°ì´íŠ¸í•˜ê¸°
            else{
                $("#mycart").attr("title", `${org.length}ê°œì˜ ìƒí’ˆì´ ì¹´íŠ¸ì— ìˆìŠµë‹ˆë‹¤ğŸ‘€`);
            } //////////// else : ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— í•˜ë‚˜ë¼ë„ ì œí’ˆì´ ìˆì„ ë•Œ //////////////


        }, /////////////// delRec ë©”ì„œë“œ ///////////////////


        // ë¦¬ìŠ¤íŠ¸ ë°”ì¸ë”© ë©”ì„œë“œ //////////////////////
        bindData(dt, pm){
            // pm-ì¹´íŠ¸ë°•ìŠ¤ì˜ right ê°’ ì „ë‹¬í•¨!!

            // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ë°ì´í„°ë¡œ í…Œì´ë¸” ë ˆì½”ë“œ íƒœê·¸ êµ¬ì„±í•˜ê¸°
            // : ë°ì´í„°ê°€ ìˆì–´ì•¼ ì¹´íŠ¸ì•„ì´ì½˜ì´ ìƒì„±ë˜ë¯€ë¡œ ì´ë¯¸ ë°ì´í„°ê°€ ìˆìŒì„ ì „ì¬í•¨!

            // 1.ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ê°ì²´ë°ì´í„° ê°€ì ¸ì˜¤ê¸° : ì…ë ¥ëœ ë°ì´í„°ëŠ” ë¬¸ìí˜• ê°ì²´ì´ë¯€ë¡œ ë‹¤ì‹œ íŒŒì‹±í•˜ì—¬ ì›ë˜ ê°ì²´ë¡œ ë³µì›í•œë‹¤!
            // (1) ë¡œì»¬ìŠ¤ ë°ì´í„° ì½ì–´ì™€ì„œ ê°ì²´í™”í•˜ê¸°
            let org = localStorage.getItem("cart");
            org = JSON.parse(org);
            console.log("ë¦¬ìŠ¤íŠ¸ êµ¬ì„± ê°ì²´: ", org);
            
            // 3ìë¦¬ë§ˆë‹¤ ì½¤ë§ˆ, ë¶™ì´ëŠ” ì •ê·œì‹
            const chx = x => x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

            // (2) ê²½ìš°2) ë°ì´í„°ë¥¼ ì´ìš©í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ íƒœê·¸ ë§Œë“¤ê¸° : mapìœ¼ë¡œ ì¨ë³´ê¸°
            let rec = org.map((v, i)=>
                `
                    <tr>
                        <!-- ìƒí’ˆì´ë¯¸ì§€ -->
                        <td>
                            <img src="${'images/goods/'+v.cat+'/'+v.ginfo[0]+'.png'}" style="width:50px" alt="item" />
                        </td>
                        <!-- ë²ˆí˜¸ : ë¦¬ìŠ¤íŠ¸ ìˆœì„œ ë²ˆí˜¸ -->
                        <td>${i+1}</td>
                        <!-- ìƒí’ˆëª… -->
                        <td>${v.ginfo[1]}</td>
                        <!-- ìƒí’ˆì½”ë“œ -->
                        <td>${v.ginfo[2]}</td>
                        <!-- ë‹¨ê°€ -->
                        <td>${v.ginfo[3]}</td>
                        <!-- ìˆ˜ëŸ‰ -->
                        <td>${v.num}</td>
                        <!-- í•©ê³„ -->
                        <td>${
                            
                            chx(v.ginfo[3].trim().replaceAll(",", "").replace("ì›", "")*v.num) + "ì›"
                        }</td>
                        <!-- ì‚­ì œ -->
                        <td>
                            <button class="cfn" data-idx="${v.idx}">Ã—</button>
                        </td>
                    </tr>
                `
            ); ///////////////// map /////////////////

            // console.log("ìƒì„±ì½”ë“œ: ", rec.join(""));
            // join() : ì–´ë–¤ ë¬¸ì(?) í•©ì¹˜ëŠ” ê±° -> ë°°ì—´ ë¬¸ì ì‚¬ì´ì‚¬ì´ë¥¼ "ì´ ì•ˆì— ì íŒ ê±¸"ì¨ì„œ êµ¬ë¶„!í•˜ë©´ì„œ í•©ì¹¨
            // ë°°ì—´.join(êµ¬ë¶„ì) : ë°°ì—´ì„ êµ¬ë¶„ìë¥¼ ì‚¬ì´ì— ì¨ ê°€ë©° í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ í•©ì³ì¤Œ
            // êµ¬ë¶„ìë¥¼ ë¹ˆ ë¬¸ìì—´ë¡œ ë„£ìœ¼ë©´ ì‚¬ì´êµ¬ë¶„ì ì—†ì´ í•©ì³ì§
            // ê¸°ë³¸ê°’(ìƒëµì‹œ)ì€ ì½¤ë§ˆ, ê°€ ì‚¬ì´ì— ë“¤ì–´ê°

            // [ ì´í•©ê³„ êµ¬í•˜ê¸° ] /////////////////////////////////
            
            // ë‹¨ê°€ ìˆ«ìë§Œ ë‚¨ê¸°ê¸°
            const pnum = x => x.trim().replaceAll(",", "").replace("ì›", "");
            
            // ì—¬ê¸°ì„œ orgì˜ í•­ëª©(ê°ì²´ ë°ì´í„°)ë¥¼ í•˜ë‚˜ì”© ëŒë©´ì„œ ê°œìˆ˜ì™€ ê°€ê²©ì„ ê°€ì ¸ì™€ ê·¸ ë‘˜ ê³±í•˜ê¸°
            let total = org.map(v => 
                // console.log(`
                //     ë‹¨ê°€ : ${pnum(v.ginfo[3])}
                //     ìˆ˜ëŸ‰ : ${v.num}
                // `)
                pnum(v.ginfo[3]) * v.num
            ); /////////// map ///////////

            // map() ë©”ì„œë“œëŠ” ë¦¬í„´í•  ë•Œ ê°’ ë‹¤ ë”í•´ì„œ ë¦¬í„´í•´ì£¼ëŠ”ë°, ë°°ì—´ì— ë‹´ì•„ì„œ ì¤€ë‹¤!
            console.log("ì´í•©ê³„ : ", total);

            // totalì˜ ë°°ì—´ ê°’ë“¤ ë‹¤ ë”í•˜ê¸° : tempë¼ëŠ” ì„ì‹œ ë³€ìˆ˜ ë§Œë“¤ê³  ê±°ê¸°ì— ê° ê°’ì„ ì¶•ì í•´ì„œ ìŒ“ì€ í›„ì— ì›ë˜ ë³€ìˆ˜ì¸ totalì— í• ë‹¹í•˜ê¸°
            let temp = 0;
            total.forEach(v=>temp+=v);
            total = temp;

            console.log("ìµœì¢…ì€?", total);


            // 3. ìƒì„±ëœ ì•„ì´ë””ê°€ ì¹´íŠ¸ë¦¬ìŠ¤íŠ¸ ìš”ì†Œì— í…Œì´ë¸” ë„£ê¸°
            $("#cartlist")
            // (1) html íƒœì´ë¸” íƒœê·¸ ë„£ê¸°
            .html(`
                <a href="#" class="cbtn cbtn2"><span style="display:none">ë‹«ê¸°ë²„íŠ¼</span></a>
                <!-- aìš”ì†Œì˜ ê·œì¹™ : ë¬´ì–¸ê°ˆ ê°ì‹¸ì•¼í•¨! ë¹„ì–´ìˆìœ¼ë©´ ì•ˆ ë¨! -->
                <table>
                    <caption>
                        <h1>ì¹´íŠ¸ ë¦¬ìŠ¤íŠ¸</h1>
                    </caption>
                    <tr>
                        <th>ìƒí’ˆ</th>
                        <th>ë²ˆí˜¸</th>
                        <th>ìƒí’ˆëª…</th>
                        <th>ìƒí’ˆì½”ë“œ</th>
                        <th>ë‹¨ê°€</th>
                        <th>ìˆ˜ëŸ‰</th>
                        <th>í•©ê³„</th>
                        <th>ì‚­ì œ</th>
                    </tr>
                    ${rec.join('')}
                    <!-- ì´ í•©ê³„ í‘œì‹œí•˜ê¸° -->
                    <tr>
                        <td colspan="6" style="text-align:right">ì´í•©ê³„ : </td>
                        <td>
                            ${chx(total)}ì›
                        </td>
                        <td></td>
                    </tr>
                </table>
            `) /////////// html ///////////////
            // (2) ì¹´íŠ¸ ë°•ìŠ¤ css ë„£ê¸°
            .css({
                position:"fixed",
                top:"0px",
                right:pm, // "-60vw",
                width:"60vw",
                height:"100vh",
                backgroundColor:"rgba(255, 255, 255, 0.8)",
                zIndex:"9999999999",
            })
            .animate({
                right:"0",
            }, 600, "easeOutQuint")
            // (4) table css ë„£ê¸°
            .find("table").css({
                width:"90%",
                margin:"50px auto",
                fontSize:"14px",
                borderTop:"2px solid #222",
                borderBottom:"2px solid #222",
                borderCollapse:"collapse",
                // borderCollapseë¥¼ í•´ì¤˜ì•¼ í…Œì´ë¸” ìì²´ ì‚¬ì´ ê°„ê²©ì„ ì—†ì• ì¤Œ!!
                
            })
            // (5) td css ë„£ê¸°
            .find("td")
            .css({
                padding:"10px 0",
                borderTop:"1px solid #555",
                textAlign:"center",
            })
            // (6) th css ë„£ê¸°
            .parents("table")
            .find("th")
            .css({
                padding:"15px 0",
                backgroundColor:"#e5e5e5",
                fontSize:"16px",
            })
            // (7) caption css ë„£ê¸°
            .parents("table")
            .find("caption")
            .css({
                padding:"20px 0",
                textDecoration:"underline",
                textDecorationStyle:"wavy",
                fontSize:"30px",
            })
            // (8) ë‹«ê¸° ë²„íŠ¼ ì„¸íŒ…
            $(".cbtn2").click(()=>{
                $("#cartlist")
                .animate({
                    right:"-60vw",
                }, 600, "easeOutQuint");
            }); ////// click ///////
            // (9) ì‚­ì œ ë²„íŠ¼ ì²˜ë¦¬ ì—°ê²°í•˜ê¸°
            $(".cfn").click(function(){
                // ì•„ì´í…œ ì‚­ì œ ë©”ì„œë“œ í˜¸ì¶œ
                store.commit('delRec', $(this).attr("data-idx"));
                // ì•„ê¹Œ ì•„ì´í…œ ë“±ë¡í•˜ë©´ì„œ ì‹¬ì–´ë‘” ì‚¬ìš©ìì •ì˜ íƒœê·¸ data-idx íŒŒë¼ë¯¸í„°ê°’ìœ¼ë¡œ ê°€ì§€ê³  ë“¤ì–´ê°€ê¸°! (ì‚­ì œí•  idx ì •ë³´ë¥¼ ë„˜ê¹€)
            }); ////////// click ////////

        }, ///////////// bindData ë©”ì„œë“œ ///////////////


        // ìƒì„¸ ë³´ê¸° ë²„íŠ¼ ê¸°ëŠ¥ ì„¸íŒ… ë©”ì„œë“œ ///////////////
        setBtn(dt, pm){
            console.log("ë²„íŠ¼ ê¸°ëŠ¥ ì„¸íŒ…!");

            // DOM ëª¨ë‘ ë¡œë”© ë³´ì¥ í›„ì— ì„¸íŒ…í•˜ë„ë¡ í•˜ê¸°
            // ->>ì œì´ì¿¼ë¦¬ ë¡œë”© êµ¬ì—­ì— ë„£ìœ¼ë©´ ë¨!
            $(()=>{
                // ì„¸ìë¦¬ë§ˆë‹¤ ì½¤ë§ˆ í•¨ìˆ˜
                const chx = x => x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

                // console.log("ê°œìˆ˜ì¦ê°ë°•ìŠ¤", $(".chg_num"));
                $(".chg_num img").click(function(){
                    // 0.ìˆ˜ëŸ‰ í‘œì‹œ ìš”ì†Œ
                    let sum = $("#sum");

                    // 1.ì´ë¯¸ì§€ alt ì†ì„±ê°’ ì½ì–´ì˜¤ê¸°
                    let ialt = $(this).attr("alt");

                    console.log("í´ë¦­ëœ êµ¬ë§¤ìˆ˜ëŸ‰ë²„íŠ¼ img íƒœê·¸ì˜ alt ì†ì„± : ", ialt);

                    // 2.ialtì˜ ê°’(ì¦ê°€/ê°ì†Œ)ì— ë”°ë¼ ì²˜ë¦¬í•˜ê¸°
                    if(ialt == "ì¦ê°€"){
                        // document.querySelector().value = 7; ğŸ‘‰ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë°©ì‹
                        sum.val(Number(sum.val())+1);
                        // : -, *, / ëŠ” ìˆ«ìë¥¼ ëŒ€ìƒìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì— ìë™ìœ¼ë¡œ í˜•ë³€í™˜ë˜ì§€ë§Œ +ëŠ” ë¬¸ì ê²°í•© ê¸°ëŠ¥ë„ ìˆìœ¼ë¯€ë¡œ ê¸°ë³¸í˜•ì´ ë¬¸ìë¼ë„ ìë™í˜•ë³€í™˜ í•˜ì§€ ì•ŠìŒ ->  ê·¸ë˜ì„œ  Number()ë¡œ ê°•ì œ í˜•ë³€í™˜ì„ í•´ì£¼ì–´ì•¼ ìˆ«ìê³„ì‚°ì´ ë¨!!
                    } ///////// if : ialtê°€ ì¦ê°€ì¸ê²½ìš° //////////
                    else
                        sum.val(Number(sum.val())-1);
                    // 0ì´ë©´ 1ë¡œ ê³ ì •í•˜ê¸°
                    if(sum.val() == 0) sum.val(1);
                    
                    // 3.ê¸°ë³¸ ê¸ˆì•¡ * ê°œìˆ˜ ê³„ì‚°í•˜ê¸°
                    let cnum = $("#gprice").text().trim().replaceAll(",", "").replace("ì›", "")*sum.val();
                    // : í…ìŠ¤íŠ¸ ê°€ì ¸ì™€ì„œ ì•ë’¤ê³µë°± ì œê±°í•˜ê³  ì½¤ë§ˆ,ë¥¼ ""ë¡œ ë°”ê¾¸ê³  ì› ê¸€ìë¥¼ ""ë¡œ ë°”ê¾¸ê¸°

                    console.log("ê°€ê²© í™•ì¸ : ", cnum);

                    // 4.ì¶œë ¥í•˜ê¸°
                    $("#total").text(chx(cnum) + "ì›");


                }); //////// click ///////////
            

            }); /////////////// jQB ///////////////////////
        }, //////////// setBtn ë©”ì„œë“œ /////////////////

    }, /////////////////// mutations êµ¬ì—­ ///////////////////////
}); //////////////// ë·°ì—‘ìŠ¤ ìŠ¤í† ì–´ /////////////////////////////////

// ë‚´ë³´ë‚´ê¸°
export default store;