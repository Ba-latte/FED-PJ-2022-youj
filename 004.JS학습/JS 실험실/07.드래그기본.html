<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>07.ë“œë˜ê·¸ê¸°ë³¸</title>
    <style>
        body{
            height: 100vh;
            background: url(http://www.kukinews.com/data/kuk/image/2022/08/29/kuk202208290038.jpg) center top/auto 100%;
        }
        .dtg{
            position: relative;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background-color: #f00;
        }
        .dtg1{
            background: url(https://img3.daumcdn.net/thumb/R658x0.q70/?fname=https://t1.daumcdn.net/news/202107/08/JTBC/20210708153002482ktbd.jpg) no-repeat center top/cover;
        }
        .dtg2{
            background: url(https://newsimg.hankookilbo.com/cms/articlerelease/2021/03/22/cdf0fd2f-64a6-4e22-b8e6-865da21c7ba8.jpg) no-repeat center center/cover;
        }
    </style>
    <script>
        // ë¡œë“œêµ¬ì—­ ///////////////////////////
        window.addEventListener("DOMContentLoaded", ()=>{
            // 1.ëŒ€ìƒ ì„ ì • : .dtg
            const dtg = document.querySelectorAll(".dtg");
            // console.log(dtg);

            // 2.ë“œë˜ê·¸ ì„¤ì •í•˜ê¸°
            dtg.forEach(ele=>goDrag(ele));


            
        }); /////////////////// ë¡œë“œ êµ¬ì—­ //////////////////////////////////






        
        /************************************************
            [ ë“œë˜ê·¸ ê¸°ëŠ¥ êµ¬í˜„ì„ ìœ„í•œ ì´ë²¤íŠ¸ ]
        1.ë”¸ : ë§ˆìš°ìŠ¤ í¬ì¸í„° ëˆ„ë¦„ -> mousedown
        
        2.ê° : ë§ˆìš°ìŠ¤ í¬ì¸í„° ì˜¬ë¼ì˜´ -> mouseup

        3.ì§ˆì§ˆ : ë§ˆìš°ìŠ¤ ì›€ì§ì¼ ë•Œ -> mousemove
        -ë“œë˜ê·¸ ìƒíƒœëŠ” "ë”¸"ìƒíƒœì—ì„œ "ì§ˆì§ˆ"í•˜ëŠ” ê²ƒ!

        ->mousedown í•  ë•Œ ë“œë˜ê·¸ ìƒíƒœ ë³€ìˆ˜ê°’ì„ 1ë¡œ ë³€ê²½!
        ->mouseup í•  ë•Œ ë“œë˜ê·¸ ìƒíƒœ ë³€ìˆ˜ê°’ì„ 0ìœ¼ë¡œ ë³€ê²½!

        ___________________________________________________

            [ ë“œë˜ê·¸ ê¸°ëŠ¥ êµ¬í˜„ ì›ë¦¬ ]
        -ë§ˆìš°ìŠ¤ í¬ì¸í„° ìœ„ì¹˜ì— ë”°ë¥¸ ë³€í™” ìˆ˜ì¹˜ë¥¼ ê³„ì‚°í•˜ì—¬ ìš”ì†Œì˜ top, left ìœ„ì¹˜ê°’ìœ¼ë¡œ ë°˜ì˜í•œë‹¤
        
        -í”„ë¡œì„¸ìŠ¤
            (1)mousedown ì´ë²¤íŠ¸ì—ì„œëŠ” ì‹œì‘ìœ„ì¹˜ê°’ ì €ì¥
            (2)mousemove ì´ë²¤íŠ¸ì—ì„œëŠ” ì›€ì§ì¸ ìœ„ì¹˜ì™€ ì‹œì‘ìœ„ì¹˜ì˜ ì°¨ì´ê°’ ì €ì¥
            (3)mousemoveì—ì„œì˜ ì°¨ì´ê°’ì„ íƒ€ê²Ÿ ìš”ì†Œì˜ left, topê°’ì— ë°˜ì˜
            (4)mouseup ì´ë²¤íŠ¸ì—ì„œëŠ” ë‹¤ìŒ ì´ë™ì„ ìœ„í•œ ë§ˆì§€ë§‰ ìœ„ì¹˜ê°’ ì €ì¥
            (5)mousemove ì´ë²¤íŠ¸ì—ì„œ ë§ˆì§€ë§‰ ìœ„ì¹˜ë¡œë¶€í„°ì˜ ì´ë™ì„ ê³„ì‚°í•¨

        ************************************************/








        /*****************************************************
            [ ë“œë˜ê·¸ ë‹¤ì¤‘ ì ìš© í•¨ìˆ˜ ë§Œë“¤ê¸° ]
        -í•¨ìˆ˜ëª… : goDrag
        -ê¸°ëŠ¥ : ë‹¤ì¤‘ ë“œë˜ê·¸ ê¸°ëŠ¥ ì ìš©
        *****************************************************/

        function goDrag(obj){ // obj : ë“œë˜ê·¸ ëŒ€ìƒ

            // ğŸ¶ë³€ìˆ˜ ë§Œë“¤ê¸° //////////////////
            // (1) ë“œë˜ê·¸ ìƒíƒœ ë³€ìˆ˜ -> true: ë“œë˜ê·¸ ì¤‘ / false: ë“œë˜ê·¸ ì•„ë‹˜
            let drag = false;
            // (2) ì²«ë²ˆì§¸ ìœ„ì¹˜ í¬ì¸íŠ¸ first x, first y
            let fx, fy;
            // (3) ë§ˆì§€ë§‰ ìœ„ì¹˜ í¬ì¸íŠ¸ last x, last y ->> ë§¨ì²˜ìŒì—ëŠ” ë§ˆì§€ë§‰ìœ„ì¹˜í¬ì¸íŠ¸ê°€ ì—†ìœ¼ë‹ˆê¹Œ, 0ì„ í• ë‹¹í•´ë‘¬ì•¼í•¨
            let lx=0, ly=0;
            // (4) ì›€ì§ì¼ ë•Œ ìœ„ì¹˜ í¬ì¸íŠ¸ move x, move y
            let mvx, mvy;
            // (5) ìœ„ì¹˜ì´ë™ ì°¨ì´ê°’ ì €ì¥í•  ë³€ìˆ˜ result x, result y
            let rx, ry;


            // ğŸ¶í•¨ìˆ˜ ë§Œë“¤ê¸° : í• ë‹¹í˜• ìµëª…í•¨ìˆ˜ //////////////////
            // (1) ë“œë˜ê·¸ìƒíƒœ true ì¸ ë³€ìˆ˜
            const dTrue = () => drag = true;
            // (2) ë“œë˜ê·¸ìƒíƒœ false ì¸ ë³€ìˆ˜
            const dFalse = () => drag = false;
            // (3) ë“œë˜ê·¸ ì›€ì§ì¼ ë•Œ ì‘ë™ í•¨ìˆ˜
            const dMove = ()=>{
                // console.log("ë“œë˜ê·¸ ìƒíƒœ: ", drag);
                
                // ë“œë˜ê·¸ ìƒíƒœì¼ë•Œë§Œ ì‹¤í–‰
                if(drag){

                    // 1.ë“œë˜ê·¸ ìƒíƒœì—ì„œ ì›€ì§ì¼ ë•Œì˜ ìœ„ì¹˜ê°’ : mvx, mvy
                    mvx = event.pageX;
                    mvy = event.pageY;

                    // 2.ì›€ì§ì¼ ë•Œì˜ ìœ„ì¹˜ê°’ - ì²˜ìŒ ìœ„ì¹˜ê°’ -> rx, ryì— ë‹´ì„ ì˜ˆì •ì„
                    // xì¶• ê°’ = leftê°’, yì¶• ê°’ = topê°’ì´ ë¨!
                    rx = mvx - fx;
                    ry = mvy - fy;

                    // 3.x,y ì›€ì§ì¸ ìœ„ì¹˜ê°’ì„ íƒ€ê²Ÿìš”ì†Œì— ì ìš©í•˜ê¸°
                    obj.style.left = (rx+lx) + "px";
                    obj.style.top = (ry+ly) + "px";
                    // ->> ê·¸ëŸ°ë°, í•œë²ˆ ë“œë˜ê·¸ í›„ ë‹¤ì‹œ í•˜ë ¤ë©´ ì›ë˜ìœ„ì¹˜ë¡œ ëŒì•„ê°€ë²„ë ¤ì„œ ê³ ì¥ë‚¨ ã… ã… 
                    // ->>ì¦‰! í•œë²ˆ ë“œë˜ê·¸ í›„ ë‹¤ì‹œ ë“œë˜ê·¸í•  ë•Œ! ì›€ì§ì¸ ìœ„ì¹˜ê°’ì´ í•„ìš”! -> ë”°ë¡œ ì €ì¥í•´ì•¼ í•¨!
                    // ->>ë§ˆì§€ë§‰ ìœ„ì¹˜ê°’ ì €ì¥í•  ë³€ìˆ˜ : lx, ly
                    // ->>í•­ìƒ ìµœì¢… ìœ„ì¹˜ì—ì„œ ì›€ì§ì¸ ë§Œí¼ì˜ ìœ„ì¹˜ê°’ì„ ë”í•œë‹¤!
                    



                    console.log(`fx:${fx} | fy:${fy}`);
                    console.log(`mvx:${mvx} | mvy:${mvy}`);
                    console.log(`rx:${rx} | ry:${ry}`);
                    console.log(`lx:${lx} | ly:${ly}`);
                } //////////// if : ë“œë˜ê·¸ /////////////

            }; /////////// dMove ////////////

            // (4) ì²«ë²ˆì§¸ ìœ„ì¹˜ í¬ì¸íŠ¸ ì„¸íŒ… í•¨ìˆ˜ : ì²˜ìŒ ì°ì—ˆì„ ë•Œ ì‘ë™í•˜ëŠ” ê²ƒ
            const firstPoint = () => {fx = event.pageX; fy = event.pageY;};

            // (4) ë§ˆì§€ë§‰ ìœ„ì¹˜ í¬ì¸íŠ¸ ì„¸íŒ… í•¨ìˆ˜ : í´ë¦­ë²„íŠ¼ì—ì„œ ì† ë—„ ë•Œ ì‘ë™í•˜ëŠ” ê²ƒ
            const lastPoint = () => {lx += rx; ly += ry;};
            // ìµœì¢… ì´ë™ ê²°ê³¼ê°’ì¸ rx,ryë¥¼ í•­ìƒ "ëŒ€ì…ì—°ì‚°"í•˜ì—¬ ê°’ì„ ì—…ë°ì´íŠ¸ í•´ì•¼í•¨!



            // ğŸ¶ì´ë²¤íŠ¸ ë“±ë¡í•˜ê¸° ////////////
            // (1) ë§ˆìš°ìŠ¤ ë‚´ë ¤ê°ˆ ë•Œ : ë“œë˜ê·¸ture + ì²«ë²ˆì§¸ ìœ„ì¹˜ê°’ ì—…ë°ì´íŠ¸
            obj.addEventListener("mousedown", ()=>{dTrue(); firstPoint();});
            // (2) ë§ˆìš°ìŠ¤ ì˜¬ë¼ì˜¬ ë•Œ : ë“œë˜ê·¸false + ë§ˆì§€ë§‰ ìœ„ì¹˜ê°’ ì—…ë°ì´íŠ¸
            obj.addEventListener("mouseup", ()=>{dFalse(); lastPoint();});
            // (3) ë§ˆìš°ìŠ¤ ì›€ì§ì¼ ë•Œ
            obj.addEventListener("mousemove", dMove);
            // (4) ë§ˆìš°ìŠ¤ ë²—ì–´ë‚  ë•Œ
            obj.addEventListener("mouseleave", dFalse);

            
        } ///////////////// goDrag() í•¨ìˆ˜ //////////////////////

    </script>
</head>
<body>
    <div class="dtg dtg1"></div>
    <div class="dtg dtg2"></div>
</body>
</html>