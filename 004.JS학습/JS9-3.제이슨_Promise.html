<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>JS9-3. ì œì´ìŠ¨ ì—°ìŠµ</title>
        <!-- ì œì´ìŠ¨ ë¶ˆëŸ¬ì˜¤ê¸°! -->
        <script src="./JS9-3.Data.json"></script>
        <script>
            /**************************************************
         *  
            [ ì œì´ìŠ¨(JSON) ì´ë€? ]
            ê°ì²´í˜•ì‹ì˜ ë°ì´í„° ì €ì¥íŒŒì¼
            ê°ì²´ëŠ” Object ì¦‰, {ì†ì„±:ê°’} í˜•ì‹ ë°ì´í„°í¬ë©§

            - ì´ì „ì—ëŠ” xmlì´ ë§ì´ ì“°ì˜€ìœ¼ë‚˜
            ì§€ê¸ˆì€ ì œì´ìŠ¨ì´ ëŒ€ì„¸ì„!
            - ì´ìœ ëŠ”? ì½ê³  ì“°ê¸°ê°€ í¸ë¦¬í•¨. ê°€ë…ì„± ì¢‹ìŒ
            - xmlê³¼ jsonì˜ ê³µí†µì :
            ëª¨ë‘ DBì— ë„£ê³  ë¹¼ëŠ” textê¸°ë°˜ ë°ì´í„°í˜•ì‹!

            -> ì°¸ê³ 
            https://www.w3schools.com/js/js_json_intro.asp


            ________________________________

            [ JSì—ì„œ JSONì‚¬ìš©í•˜ê¸° ]

            1. ë¨¼ì € ì œì´ìŠ¨ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¨ë‹¤
            (ë‹¨, ì œì´ìŠ¨ íŒŒì¼ì•ˆì— ì „ì²´ê°ì²´ë¥¼ ë³€ìˆ˜ì— ë‹´ì•„ì•¼í•œë‹¤! 
            -> JSì—ì„œ ì œì´ìŠ¨ ì‚¬ìš©ì‹œ í•„ìš”!)
            -> ì‹¤ìŠµì—ì„œ ì‚¬ìš©í•˜ëŠ” ì œì´ìŠ¨íŒŒì¼ì€
            jsonDataë¼ëŠ” ë³€ìˆ˜ì— ë‹´ì•˜ë‹¤!

            2. ë³€ìˆ˜ì— ì œì´ìŠ¨ íŒŒì¼ì„ íŒŒì‹±í•˜ì—¬ í• ë‹¹í•œë‹¤!
            let ë³€ìˆ˜ëª… = JSON.parse(JSON.stringify(ì œì´ìŠ¨í• ë‹¹ë³€ìˆ˜))

            * íŒŒì‹±ì´ë€? ë¬¸ìì—´ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ë¶„í•´í•˜ì—¬
            ëª©ì í•œ íŒ¨í„´ì— ë§ê²Œ ë¬¸ìì—´êµ¬ì¡°ë¥¼ ê²°ì •í•˜ëŠ”ê²ƒ!
            -> JSì˜ ì œì´ìŠ¨ ë°ì´í„° íŒŒì‹± ë©”ì„œë“œ : JSON.parse()
            -> JSì˜ ì œì´ìŠ¨ í˜•ì‹ ë°ì´í„°ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ëŠ” ë©”ì„œë“œ
                : JSON.stringify()
            
            3. ì›í•˜ëŠ” ëŒ€ë¡œ ê°ì²´í˜¸ì¶œ í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤!
            ì˜ˆ) ê°ì²´ë³€ìˆ˜ëª…[ì†ì„±ëª…]

        *****************************************************/

            // myjson ë³€ìˆ˜ ë‹¤ë¥¸ê³³ì—ì„œë„ ì“°ê¸° ë•Œë¬¸ì— ì „ì—­í™” ì‹œì¼œì£¼ê¸°
            let myjson;

            // í”„ë¼ë¯¸ìŠ¤ ì ìš©í•˜ê¸°!!
            let myProm = new Promise((success)=>{

                // ğŸ“¢ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ê²ƒì„ ê°€ì •í•˜ì—¬ setTimeoutìœ¼ë¡œ ì„¸íŒ…í•´ë³´ê¸°
                setTimeout(() => {
                    // ë³€ìˆ˜ì— ì œì´ìŠ¨ íŒŒì‹±í›„ í• ë‹¹í•˜ê¸°
                    myjson = JSON.parse(JSON.stringify(jsonData));
    
                    // ì„±ê³µí•¨ìˆ˜ í˜¸ì¶œ
                    success("ì œì´ìŠ¨ì„±ê³µ!");
                }, 6000); ////// setTimeout ///////

            }); ///////// myProm //////////////////


            // í”„ë¼ë¯¸ìŠ¤ ì„±ê³µ í›„ ì‹¤í–‰í•˜ëŠ” ë©”ì„œë“œ then()
            myProm.then((msg)=>{
                // ì„±ê³µë©”ì‹œì§€ í™•ì¸
                console.log(msg);

                // ì œì´ìŠ¨ íŒŒì‹± í™•ì¸í•˜ê¸°!
                console.log(myjson);
    
                // shopping > ë©”ë‰´ ì°ì–´ë³´ê¸°
                // console.log(myjson["shopping"]["ë©”ë‰´"]);
                console.log(myjson.shopping.ë©”ë‰´);
    
    
                // "living" ì†ì„±ì˜ ë°ì´í„°ë¥¼ for inë¬¸ìœ¼ë¡œ ëŒì•„ ì°ê¸°!
                let mydata = myjson["living"];
                for(let x in mydata){ // xëŠ” ì†ì„±ëª…
                    document.write(`<h2>${x} : ${mydata[x]}</h2>`);
                } /////////// for in ///////////////
    
                document.write("<hr>"); // êµ¬ë¶„ì„ 
    
                // "fashion" ì†ì„±ì˜ ë°ì´í„°ë¥¼ for inë¬¸ìœ¼ë¡œ ëŒì•„ ì°ê¸°!
                let mydata2 = myjson["fashion"];
                for(let x in mydata2){ // xëŠ” ì†ì„±ëª…
                    document.write(`<h2>${x} : ${mydata2[x]}</h2>`);
                } /////////// for in ///////////////

            }); //////////// then ë©”ì„œë“œ //////////////



        </script>
    </head>
    <body></body>
</html>
