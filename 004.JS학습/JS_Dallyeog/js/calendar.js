// ë‹¬ë ¥ ìƒì„±ìí•¨ìˆ˜ /////


// í•¨ìˆ˜ í˜¸ì¶œ : í•¨ìˆ˜ ì•ˆì— ìˆëŠ” ì• ë“¤ì€ htmlíŒŒì¼ ë‹¤ ë¡œë”©ëœ í›„ì—ì•¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ìš”ì†Œë“¤ì´ë¯€ë¡œ deferì‚¬ìš©í•¨
MakeDallyeok();
// window.addEventListener("DOMContentLoaded", MakeDallyeok);



// ì•ì— í‚¤ì›Œë“œ newë¥¼ ì•ˆì“°ê³  ê·¸ëƒ¥ ëŒ€ë¬¸ìë¡œë§Œ ì“°ë©´ ì¼ë°˜í•¨ìˆ˜ê°€ ë¨
function MakeDallyeok(){

    // ì„ íƒí•¨ìˆ˜ /////////////////
    const qs = x => document.querySelector(x);
    const qsa = x => document.querySelectorAll(x);
    // ë©”ì‹œì§€ //////////////////
    const cg = x => console.log(x);

    // 1.ë³€ìˆ˜ ì„¸íŒ… //////////////////
    // (1)ë³€ê²½í•  í˜„ì¬ë‚ ì§œ ê°ì²´
    const curr_date = new Date();
    // (2)ì˜¤ëŠ˜ ë‚ ì§œ ê°ì²´
    const today = new Date();
    // (3)ë…„ë„ ìš”ì†Œ : .yearTit
    const yearTit = qs(".yearTit");    
    // (4)ì›” ìš”ì†Œ : .monthTit
    const monthTit = qs(".monthTit");    
    // (5)ë‚ ì§œ ìš”ì†Œ : .dates
    const dates = qs(".dates");
    
    cg(dates);

    // 2.í•¨ìˆ˜ ë§Œë“¤ê¸° /////////////////
    // ğŸŒ·(1) ë‹¬ë ¥ ì´ˆê¸°í™”+êµ¬ì„± í•¨ìˆ˜
    const initDallyeok = ()=>{
        // getMonth()ì •ë³´ëŠ” í•­ìƒ í˜„ì¬ ë‹¬ ìˆ«ìë³´ë‹¤ 1ì´ ì‘ë‹¤ëŠ” ê²ƒì„ ìœ ë…í•  ê²ƒ! (ì¸ë±ìŠ¤ ìˆœë²ˆì´ë¯€ë¡œ!)
        // 1.ì „ë‹¬ ë§ˆì§€ë§‰ ë‚ ì§œ(ì˜µì…˜:0) -> ë‹¬ë ¥ ì „ë‹¬ì˜ ëìª½ ë‚ ì§œ í‘œì‹œ ìœ„í•¨ (ê·¸ë˜ì•¼...ë§ˆì§€ë§‰ ë‚ ì§œë¡œë¶€í„° ëª‡ê°œ êµ¬í•´ì™€ì„œ ì ì–´ë‘ì§€!)
        const prevLast = new Date(curr_date.getFullYear(), curr_date.getMonth(), 0);

        // 2.í˜„ì¬ë‹¬ ì²«ì§¸ ë‚ ì§œ(ì˜µì…˜:1->ì´ì „ ë‹¬ë¡œ ì„¸íŒ…!) -> ë‹¬ë ¥ì— ì´ì „ ë‹¬ ì„¸íŒ…ì„ ìœ„í•œ ìš”ì¼ì„ êµ¬í•˜ê¸° ìœ„í•´
        const thisFirst = new Date(curr_date.getFullYear(), curr_date.getMonth(), 1);

        // 3.í˜„ì¬ë‹¬ ë§ˆì§€ë§‰ ë‚ ì§œ(ì˜µì…˜:0) -> í˜„ì¬ ë‹¬ë ¥ì˜ ë‚ ì§œ ì„¸íŒ…ì„ ìœ„í•´
        const thisLast = new Date(curr_date.getFullYear(), curr_date.getMonth()+1, 0);

        // 4.ë…„ë„ ì¶œë ¥í•˜ê¸°
        yearTit.innerHTML = curr_date.getFullYear();

        // 5.ì›” ì¶œë ¥í•˜ê¸° : í˜„ì¬ ë‹¬ì˜ ìˆ«ìëŠ” getMonth()+1ì„
        monthTit.innerHTML = curr_date.getMonth()+1;

        // 6.ë‚ ì§œ ë„£ì„ ë°°ì—´ë³€ìˆ˜ ë§Œë“¤ê¸°
        const dset = [];

        // 7.ì „ë‹¬ ë‚ ì§œ ì•ìª½ ì±„ìš°ê¸°
        // ì¡°ê±´ : í˜„ì¬ë‹¬ ì²«ì§¸ ë‚ ì§œì˜ ìš”ì¼ì´ 0ì´ ì•„ë‹ˆë©´(=ì¼ìš”ì¼ì´ ì•„ë‹ˆë©´)!! ë‚´ìš©ì´ ìˆìŒ
        // cg(thisFirst.getDay());
        if(thisFirst.getDay() !== 0){
            // forë¬¸ ì„¸íŒ… : ëª‡ë°”í€´ ëŒë¦¬ë‹ˆ?
            for(let i = 0; i < thisFirst.getDay(); i++){
                // cg(i);
                // ë°˜ë³µ íšŸìˆ˜ë§Œí¼ ë°°ì—´ ì•ìª½ì— ì¶”ê°€í•œë‹¤
                // ì „ë‹¬ ë§ˆì§€ë§‰ ë‚ ì§œë¶€í„°! -> prevLast ë³€ìˆ˜ì—ì„œ getDateí•˜ë©´ ë¨...!
                dset.unshift(`<span style="color:#ccc" class="bdt">${prevLast.getDate()-i}</span>`);
                // ğŸ¥°ë§ˆì§€ë§‰ ë‚ ì§œ - iì¦ê°€ë³€ìˆ˜ = ì•ì—ì„œë¶€í„° 1ì”© ì‘ì•„ì§€ëŠ” ìˆ«ìê°€ ì¶”ê°€ë¨ğŸ¥°
                // unshift(): ë°°ì—´ ì•ì— ê°’ì„ ì¶”ê°€í•˜ëŠ” ë©”ì„œë“œ
            } ////////////// for ///////////////////
        } ///////////////// if ///////////////////
        
        // (2) í˜„ì¬ ì›” ì‚½ì…í•˜ê¸° ////////////////////////////
        // ë°˜ë³µë¬¸ êµ¬ì„± : í˜„ì¬ì›”ì˜ 1ì¼ë¶€í„° ë§ˆì§€ë§‰ ë‚ ì§œê¹Œì§€ ë°˜ë³µí•´ì„œ ë°°ì—´ ì¶”ê°€!
        // í˜„ì¬ ì›” ë§ˆì§€ë§‰ ë‚ ì§œ : thisLast.getDate()
        for(let i = 1; i <= thisLast.getDate(); i++){
            dset.push(i);
        } //////////////////// for //////////////////////////
        

        // (3) ë‹¤ìŒë‹¬ ë‚˜ë¨¸ì§€ ì¹¸ ì‚½ì…í•˜ê¸° : ë„‰ë„‰í•˜ê²Œ 2ì£¼ì¹˜ë¥¼ ì¶”ê°€ë¡œ ì¡ìœ¼ë ¤ê³  í•¨! (êµ³ì´ ì–´ë µê²Œ ê³„ì‚°í•˜ì§€ ë§ê³ ! ë‚˜ì¤‘ì— í™”ë©´ì—ì„œëŠ” ê·¸ëƒ¥ í•„ìš” ë¶€ë¶„ë§Œ ì˜ë¼ì„œ ì“¸ ê±°ë‹ˆê¹Œ!)
        // ë°˜ë³µë¬¸ êµ¬ì„± : 1ë¶€í„° 2ì£¼ ë¶„ëŸ‰ì •ë„ë¥¼ ë„£ëŠ”ë‹¤
        for(let i = 1; i < 14; i++){
            dset.push(`<span style="color:#ccc" class="bdt">${i}</span>`);
        }
        // cg(dset);

        // í™”ë©´ì— ë¿Œë¦´ html ë³€ìˆ˜ 
        let hcode = "";

        // (4) htmlì— ë‚ ì§œ ë§Œí¼ ë°°ì—´ ì •ë³´ë¡œ ì„¸íŒ…í•˜ê¸° : ë‚ ì§œ ë¿Œë¦¬ê¸°
        // 7ì¼ * 6ì£¼ = 42ê°œ
        for(let i = 0; i < 42; i++){
            // ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œ : ì—°ì›”ì¼ì´ ëª¨ë‘ ì¼ì¹˜í•˜ëŠ” ë‚ ì§œì—ë§Œ í‘œì‹œí•˜ê¸° (í´ë˜ìŠ¤ today ë¶€ì—¬)
            if(today.getDate()===dset[i] && today.getMonth()===curr_date.getMonth() && today.getFullYear()===curr_date.getFullYear()){
                hcode += `<div class="date today">${dset[i]}</div>`;
            }
            else{
                hcode += `<div class="date">${dset[i]}</div>`;
            }
        } /////////////// for //////////////////

        // (5) ì½”ë“œ í™”ë©´ì— ë„£ê¸°
        // ëŒ€ìƒ : .dates -> datesë³€ìˆ˜
        dates.innerHTML = hcode;
        

    }; //////////////// initDallyeok //////////////////

    // í• ë‹¹ í•¨ìˆ˜ í˜¸ì¶œì€ ë°‘ì—ì„œ í˜¸ì¶œí•´ì•¼ í•¨!
    initDallyeok();

    ////////////// ğŸŒ·(2) ì´ì „ ë‹¬ë ¥ ì¶œë ¥í•˜ê¸° í•¨ìˆ˜ /////////////////////////////
    const prevCal = ()=>{
        // ì´ì „ ì›”ë¡œ ë³€ê²½í•˜ì—¬ initDallyeok í•¨ìˆ˜ í˜¸ì¶œ!
        // getMonth() : ì›” ê°€ì ¸ì˜¤ê¸° / setMonth() : ì›” ì„¸íŒ…í•˜ê¸°
        curr_date.setMonth(curr_date.getMonth()-1);

        initDallyeok();
    }; //////////////////// prevCal ///////////////////////////////
    
    // ë²„íŠ¼ì— í´ë¦­ ì„¤ì •í•˜ê¸° ///////////////////////////////////////
    qs(".btnL").onclick = prevCal;


    ////////////// ğŸŒ·(3) ë‹¤ìŒë‹¬ë¡œ ì¶œë ¥í•˜ê¸° í•¨ìˆ˜ /////////////////////////////
    const nextCal = ()=>{
        // ì´ì „ ì›”ë¡œ ë³€ê²½í•˜ì—¬ initDallyeok í•¨ìˆ˜ í˜¸ì¶œ!
        // getMonth() : ì›” ê°€ì ¸ì˜¤ê¸° / setMonth() : ì›” ì„¸íŒ…í•˜ê¸°
        curr_date.setMonth(curr_date.getMonth()+1);
        
        initDallyeok();
    }; //////////////////// prevCal ///////////////////////////////
    qs(".btnR").onclick = nextCal;
    






} /////////////// MakeDallyeok ////////////////////