<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS4-4. 배열의 정렬</title>
    <script>
        /********************************************************************
            [ 배열의 정렬 ]
        -정렬의 정의 : 배열의 값을 기준으로 순서를 다시 정하는 것을 말함
        -배열의 정렬은 sort() 메서드를 사용하면 됨
        -sort() 메서드를 사용하여 배열의 값을 오름차순, 내림차순으로 정렬할 수 있음

            [ sort() 메서드의 특징 ]
        1. 기본정렬 : 오름차순(1, 2, 3, 4, ... 혹은 a, b, c, ...)
        2. 원리 : 배열값을 문자열로 캐스팅*한 후 변환된 문자열을 비교하여 순서를 정함
        *캐스팅 : 형변환
        -참고 : 배열값이 안 들어와있는 'undefind' 값일 경우에는 배열 맨 뒤에 배치시킴

            [ sort() 메서드 비교함수 ]
        -sort()메서드 내부에 2개의 파라미터(전달값)를 가지는 함수를 쓰면 sort()메서드 자체에서 값을 비교하여 배열값의 순서를 바꿈

        1. 기준정렬 : 오름차순 (기본값임)
        -형식 : 배열변수.sort()
        -기본 정렬임

        2. 비교함수 사용한 정렬
        -형식 : 배열변수.sort(function(x, y){
            if(x > y) return 1; // 여기서 1은 숫자라기보다는 불리언 표현한거라 생각하면 될듯 (true)
            if(x < y) return -1; // 여기서 -1이라는 시그널은 숫자라기보다는 불리언같은 표현이라 생각하면 될듯 (false)
            return 0;
        })
        -ex) 학급의 학생들 번호순으로 줄 세울 때, 서로 앞뒤번호를 물어보면서 앞/뒤로 움직이는 것과 같은 방식으로 정렬함

        3. 비교함수 사용한 정렬 단순화하기
        -삼항연산자 사용하면 됨
        -형식 : 배열변수.sort(function(x, y){
            return x == y ? 0 : x > y ? 1 : -1;
        })

        4. 리턴값의 의미
        1) if(x > y) return 1
        -x가 y 뒤에 옴
        -리턴값이 '양수'임
        -양수/음수인 게 중요한 포인트임
        2) if(x < y) return -1
        -x가 y 앞에 옴
        -리턴값 '음수'임
        3) return 0
        -x,y 정렬을 유지함
        -제자리에서 움직이지 않는다는 뜻임
        -리턴값이 0임

        ********************************************************************/

        // 숫자값 배열
        const org_num = [4, 5, 8, 10, 2, 1, 9, 3, 7, 6];

        // 문자값 배열
        const org_num2 = ["파", "타", "하", "가", "바", "사", "다", "라", "차"];

        window.addEventListener("DOMContentLoaded", ()=>{
            
            // 숫자로만 된 배열을 화면에 뿌리기
            // : map으로 코드 대체함
            const newArray = (obj)=>{
                // obj는 배열 객체를 받음

                // 맵으로 코드 구성하기 (새로운 배열이 됨)
                // 맵은 값을 받아서 바로 저장해서 리턴함(?)
                let temp = obj.map(x=>`
                    <img src="./images/num/num_0${x}.png" alt="Number">
                `);

                // 배열 출력하기
                document.querySelector(".showNum").innerHTML = temp.join('');


            }; /////////// newArray 함수 //////////

            // [ 배열 전달 함수 호출 ]
            newArray(org_num);

            // [ 첫번째 선택박스 정렬 변경 이벤트 함수 만들기 ]
            document.querySelector(".sel").onchange = (e)=>{
                // 0. 선택값 확인하기
                let opt = e.target.value;
                console.log(".sel박스 선택값 : ", opt);

                // 1. 선택값에 따른 제어
                if(opt == 1){
                    // 오름차순 선택한 경우
                    org_num.sort(function(x, y){
                        return x - y;   // 빼서 음수 나오면 오름차순 정렬이 됨
                    })
                }
                else if(opt == 2){
                    org_num.sort(function(x, y){
                        return y - x;   // 거꾸로 빼면 내림차순이 됨
                    })
                }

                // 2. 화면에 반영하기 : 기존의 org_num 배열 자체가 바뀜!
                newArray(org_num);
                // : sort후에는 배열 자체가 바뀜!


            }; /////////// change ////////////

        }); ////////////////// 로드 구역 ////////////////////////
    </script>
    <style>
        .showNum img{
            height: 100px;
        }
    </style>
</head>
<body>
    <h1 class="tit">배열의 정렬</h1>

        <h2>숫자로만 된 배열의 정렬</h2>
        <select name="sel" id="sel" class="sel">
            <option value="0">정렬선택</option>
            <option value="1">오름차순</option>
            <option value="2">내림차순</option>
        </select>
        <div class="showNum"></div>

        <select name="sel2" id="sel2" class="sel2">
            <option value="0">정렬선택</option>
            <option value="1">오름차순</option>
            <option value="2">내림차순</option>
        </select>
        <div class="showNum2"></div>

        <select name="cta" id="cta" class="cta">
            <option value="idx">idx</option>
            <option value="tit">tit</option>
            <option value="cont">cont</option>
        </select>
        <select name="sel3" id="sel3" class="sel3">
            <option value="0">정렬선택</option>
            <option value="1">오름차순</option>
            <option value="2">내림차순</option>
        </select>
        <div class="showList1">
            <table></table>
        </div>
</body>
</html>